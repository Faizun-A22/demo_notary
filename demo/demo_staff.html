<!DOCTYPE html>
<html class="light" lang="id">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>NotaryDoc Tracker - Sistem Pelacakan Dokumen Notaris</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#1f96ad",
                        "primary-dark": "#166e80",
                        "background-light": "#f6f8f8",
                        "background-dark": "#121e20",
                        "surface-light": "#ffffff",
                        "surface-dark": "#1a2c2e",
                        "alert-red": "#dc2626",
                        "alert-bg": "#fef2f2",
                        "success-green": "#10b981",
                        "warning-yellow": "#f59e0b",
                    },
                    fontFamily: {
                        "display": ["Manrope", "sans-serif"]
                    },
                    borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'pulse-slow': 'pulse 3s infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                },
            },
        }
    </script>
    <style>
        .sidebar-link {
            transition: all 0.3s ease;
        }
        .sidebar-link.active {
            background-color: #e8f0f2;
            color: #1f96ad;
        }
        .dark .sidebar-link.active {
            background-color: rgba(31, 150, 173, 0.2);
            color: #1f96ad;
        }
        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            height: 6px;
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 20px;
        }
        .table-row, .file-row, .client-row {
            transition: all 0.2s ease;
        }
        .table-row:hover, .file-row:hover, .client-row:hover {
            transform: scale(1.01);
        }
        .notification-badge {
            animation: pulse 2s infinite;
        }
        .metric-card, .report-card, .file-card, .client-card {
            transition: all 0.3s ease;
        }
        .metric-card:hover, .report-card:hover, .file-card:hover, .client-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .tab-button {
            transition: all 0.2s ease;
        }
        .tab-button.active {
            border-bottom: 2px solid #1f96ad;
            color: #1f96ad;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
        .stat-card {
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: scale(1.02);
        }
        .action-button {
            transition: all 0.2s ease;
        }
        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .filter-chip {
            transition: all 0.2s ease;
        }
        .filter-chip:hover {
            transform: translateY(-2px);
        }
        .status-badge {
            transition: all 0.2s ease;
        }
        .status-badge:hover {
            transform: scale(1.05);
        }
        .form-input {
            transition: all 0.2s ease;
        }
        .form-input:focus {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .workflow-step {
            transition: all 0.3s ease;
        }
        .workflow-step:hover {
            transform: translateX(5px);
        }
        .timeline-item {
            transition: all 0.3s ease;
        }
        .timeline-item:hover {
            transform: translateX(5px);
        }
        .progress-fill {
            transition: width 1s ease-in-out;
        }
        .status-indicator {
            animation: pulse 2s infinite;
        }
        @keyframes shimmer {
            0% { transform: translateX(-100%) skewX(-20deg); }
            100% { transform: translateX(200%) skewX(-20deg); }
        }
        .animate-shimmer {
            animation: shimmer 2s infinite;
        }
        .hover-lift {
            transition: all 0.3s ease;
        }
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        /* Hide all pages by default */
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-slate-800 dark:text-slate-200 transition-colors duration-200">
<div class="flex h-screen w-full overflow-hidden">
    <!-- Sidebar -->
    <aside id="sidebar" class="hidden w-64 flex-col border-r border-slate-200 bg-surface-light dark:border-slate-800 dark:bg-surface-dark lg:flex">
        <div class="flex h-16 items-center gap-3 border-b border-slate-100 px-6 dark:border-slate-800">
            <div class="flex items-center justify-center rounded-lg bg-primary/10 p-1.5 text-primary">
                <span class="material-symbols-outlined">history_edu</span>
            </div>
            <span class="text-lg font-bold tracking-tight text-slate-900 dark:text-white">NotaryDoc</span>
        </div>
        <div class="flex flex-1 flex-col justify-between p-4">
            <nav class="space-y-1">
                <div class="px-2 pb-2 text-xs font-semibold uppercase tracking-wider text-slate-400 dark:text-slate-500">Menu</div>
                <a class="sidebar-link active flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-colors" data-page="dashboard" href="#">
                    <span class="material-symbols-outlined text-[20px]">dashboard</span>
                    Dashboard
                </a>
                <a class="sidebar-link flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800" data-page="new_file" href="#">
                    <span class="material-symbols-outlined text-[20px]">note_add</span>
                    File Baru
                </a>
                <a class="sidebar-link flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800" data-page="all_files" href="#">
                    <span class="material-symbols-outlined text-[20px]">folder_open</span>
                    Semua File
                </a>
                <a class="sidebar-link flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800" data-page="clients" href="#">
                    <span class="material-symbols-outlined text-[20px]">group</span>
                    Klien
                </a>
                <a class="sidebar-link flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800" data-page="reports" href="#">
                    <span class="material-symbols-outlined text-[20px]">analytics</span>
                    Laporan
                </a>
                <a class="sidebar-link flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800" data-page="tracking" href="#">
                    <span class="material-symbols-outlined text-[20px]">public</span>
                    Pelacakan Publik
                </a>
            </nav>
            <div class="flex flex-col gap-4">
                <nav class="space-y-1">
                    <div class="px-2 pb-2 text-xs font-semibold uppercase tracking-wider text-slate-400 dark:text-slate-500">Sistem</div>
                    <a class="sidebar-link flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800" href="#" id="darkModeToggle">
                        <span class="material-symbols-outlined text-[20px]">dark_mode</span>
                        Mode Gelap
                    </a>
                    <a class="sidebar-link flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800" href="#" id="settingsBtn">
                        <span class="material-symbols-outlined text-[20px]">settings</span>
                        Pengaturan
                    </a>
                </nav>
                <div class="flex items-center gap-3 rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800/50">
                    <div class="h-10 w-10 overflow-hidden rounded-full bg-slate-200" data-alt="Foto profil pengguna">
                        <img alt="Profile" class="h-full w-full object-cover" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDxVNWhQG_W_ed3cfYulehqFgy1zHjDMMIjmROUMwH1GdQ_-0YSFkCDbhAUraVspPkQuL0OxU4dpVlRtthPZjLgeYBHkvhbel0_QFpjzjajgl5twyaTdmLKvqyYVPWymWFDcQYNKWMkw6jaECoHtTlY5zsE3Cd5YLdUFJEX3Iz8WFCIdH6sH7N9wTapvHPoggn6meeaInC7hTPiKLsDjeY9KtEQzcjbvxSR5QU8MOMweu2luT32b5p7neJyxE0brTANOuECjzNuvegc"/>
                    </div>
                    <div class="flex flex-1 flex-col overflow-hidden">
                        <span class="truncate text-sm font-bold text-slate-900 dark:text-white">Sarah W.</span>
                        <span class="truncate text-xs text-slate-500 dark:text-slate-400">Notaris Utama</span>
                    </div>
                </div>
            </div>
        </div>
    </aside>
    <!-- Main Content -->
    <main class="flex h-full flex-1 flex-col overflow-hidden">
        <!-- Top Header -->
        <header class="flex h-16 w-full items-center justify-between border-b border-slate-200 bg-surface-light px-6 dark:border-slate-800 dark:bg-surface-dark">
            <div class="lg:hidden">
                <button id="mobileMenuToggle" class="flex items-center text-slate-500 hover:text-slate-700 dark:text-slate-400">
                    <span class="material-symbols-outlined">menu</span>
                </button>
            </div>
            <div class="flex w-full items-center justify-between gap-6">
                <h1 id="pageTitle" class="hidden text-xl font-bold text-slate-900 dark:text-white sm:block">Dashboard</h1>
                <div class="flex items-center gap-4">
                    <!-- Search Box -->
                    <div class="hidden md:block relative w-80">
                        <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-[20px] text-slate-400">search</span>
                        <input id="globalSearch" class="h-10 w-full rounded-lg border-none bg-slate-100 pl-10 pr-4 text-sm text-slate-900 placeholder-slate-500 focus:ring-2 focus:ring-primary dark:bg-slate-800 dark:text-white dark:placeholder-slate-400" placeholder="Cari file #, klien, atau tipe..." type="text"/>
                    </div>
                    <!-- Notification Button -->
                    <button id="notificationBtn" class="relative p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                        <span class="material-symbols-outlined text-[20px] text-slate-600 dark:text-slate-400">notifications</span>
                        <span id="notificationBadge" class="notification-badge absolute top-1 right-1 h-2 w-2 rounded-full bg-alert-red"></span>
                    </button>
                    <!-- Create Button -->
                    <button id="createNewBtn" class="action-button flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm transition-all hover:bg-primary-dark hover:shadow-md active:scale-95">
                        <span class="material-symbols-outlined text-[20px]">add_circle</span>
                        <span class="hidden sm:inline">File Baru</span>
                    </button>
                </div>
            </div>
        </header>
        <!-- Scrollable Content -->
        <div id="contentArea" class="flex-1 overflow-y-auto custom-scrollbar bg-background-light p-6 dark:bg-background-dark animate-fade-in">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <div class="mx-auto max-w-7xl space-y-8">
                    <!-- Metric Cards -->
                    <div class="grid grid-cols-1 gap-4 sm:grid-cols-3">
                        <!-- Total Active -->
                        <div class="metric-card group relative overflow-hidden rounded-xl bg-surface-light p-6 shadow-sm dark:bg-surface-dark border border-slate-200 dark:border-slate-700">
                            <div class="absolute right-0 top-0 h-24 w-24 translate-x-8 translate-y-[-10px] opacity-5">
                                <span class="material-symbols-outlined text-9xl text-primary">folder_open</span>
                            </div>
                            <div class="flex flex-col gap-1">
                                <span class="text-sm font-medium text-slate-500 dark:text-slate-400">File Aktif</span>
                                <div class="flex items-baseline gap-2">
                                    <span id="activeFilesCount" class="text-3xl font-bold text-slate-900 dark:text-white">14</span>
                                    <span class="text-xs font-medium text-success-green flex items-center gap-0.5">
                                        <span class="material-symbols-outlined text-[14px]">trending_up</span>
                                        +2
                                    </span>
                                </div>
                            </div>
                            <div class="mt-4 h-1.5 w-full rounded-full bg-slate-100 dark:bg-slate-800">
                                <div class="h-1.5 rounded-full bg-primary" style="width: 70%"></div>
                            </div>
                        </div>
                        <!-- In Progress -->
                        <div class="metric-card group relative overflow-hidden rounded-xl bg-surface-light p-6 shadow-sm dark:bg-surface-dark border border-slate-200 dark:border-slate-700">
                            <div class="absolute right-0 top-0 h-24 w-24 translate-x-8 translate-y-[-10px] opacity-5">
                                <span class="material-symbols-outlined text-9xl text-warning-yellow">pending_actions</span>
                            </div>
                            <div class="flex flex-col gap-1">
                                <span class="text-sm font-medium text-slate-500 dark:text-slate-400">Membutuhkan Tindakan</span>
                                <div class="flex items-baseline gap-2">
                                    <span id="actionRequiredCount" class="text-3xl font-bold text-slate-900 dark:text-white">8</span>
                                </div>
                            </div>
                            <div class="mt-4 h-1.5 w-full rounded-full bg-slate-100 dark:bg-slate-800">
                                <div class="h-1.5 rounded-full bg-warning-yellow" style="width: 45%"></div>
                            </div>
                        </div>
                        <!-- Critical Overdue -->
                        <div class="metric-card group relative overflow-hidden rounded-xl border border-red-100 bg-red-50 p-6 shadow-sm dark:border-red-900/30 dark:bg-red-900/10">
                            <div class="absolute right-0 top-0 h-24 w-24 translate-x-8 translate-y-[-10px] opacity-10">
                                <span class="material-symbols-outlined text-9xl text-alert-red">error</span>
                            </div>
                            <div class="flex flex-col gap-1">
                                <span class="text-sm font-bold text-alert-red">Terlambat Kritis</span>
                                <div class="flex items-baseline gap-2">
                                    <span id="criticalOverdueCount" class="text-3xl font-bold text-slate-900 dark:text-white">3</span>
                                    <span class="text-xs font-medium text-alert-red flex items-center gap-0.5">
                                        <span class="material-symbols-outlined text-[14px]">priority_high</span>
                                        Tindakan
                                    </span>
                                </div>
                            </div>
                            <div class="mt-4 h-1.5 w-full rounded-full bg-white dark:bg-slate-800">
                                <div class="h-1.5 rounded-full bg-alert-red" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Main Data Table Section -->
                    <div class="flex flex-col rounded-xl border border-slate-200 bg-surface-light shadow-sm dark:border-slate-700 dark:bg-surface-dark animate-slide-up">
                        <!-- Table Toolbar -->
                        <div class="flex flex-wrap items-center justify-between gap-4 border-b border-slate-200 p-4 dark:border-slate-800">
                            <h2 class="text-lg font-bold text-slate-900 dark:text-white">Registry File Aktif</h2>
                            <div class="flex items-center gap-2">
                                <div class="relative">
                                    <select id="dashboardTypeFilter" class="h-9 appearance-none rounded-lg border border-slate-200 bg-white pl-3 pr-8 text-sm text-slate-700 focus:border-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300">
                                        <option value="">Semua Tipe</option>
                                        <option value="AJB">AJB (Jual Beli)</option>
                                        <option value="SKMHT">SKMHT (Kuasa)</option>
                                        <option value="APHT">APHT (Jaminan)</option>
                                    </select>
                                    <span class="material-symbols-outlined pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-sm text-slate-400">expand_more</span>
                                </div>
                                <div class="relative">
                                    <select id="dashboardStatusFilter" class="h-9 appearance-none rounded-lg border border-slate-200 bg-white pl-3 pr-8 text-sm text-slate-700 focus:border-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300">
                                        <option value="">Filter Status</option>
                                        <option value="In Progress">Dalam Proses</option>
                                        <option value="Overdue">Terlambat</option>
                                        <option value="Completed">Selesai</option>
                                    </select>
                                    <span class="material-symbols-outlined pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-sm text-slate-400">expand_more</span>
                                </div>
                            </div>
                        </div>
                        <!-- Table -->
                        <div class="w-full overflow-x-auto">
                            <table class="w-full text-left text-sm">
                                <thead class="bg-slate-50 text-xs font-semibold uppercase text-slate-500 dark:bg-slate-800/50 dark:text-slate-400">
                                    <tr>
                                        <th class="px-6 py-4">No. File</th>
                                        <th class="px-6 py-4">Nama Klien</th>
                                        <th class="px-6 py-4">Tipe Layanan</th>
                                        <th class="px-6 py-4 w-48">Progress</th>
                                        <th class="px-6 py-4">Perkiraan Selesai</th>
                                        <th class="px-6 py-4">Status</th>
                                        <th class="px-6 py-4 text-right">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="dashboardTableBody" class="divide-y divide-slate-100 dark:divide-slate-800">
                                    <!-- Table rows will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        <!-- Pagination -->
                        <div class="flex items-center justify-between border-t border-slate-200 px-6 py-4 dark:border-slate-800">
                            <div class="text-sm text-slate-500 dark:text-slate-400">
                                Menampilkan <span class="font-medium text-slate-900 dark:text-white">1</span> hingga <span class="font-medium text-slate-900 dark:text-white">5</span> dari <span class="font-medium text-slate-900 dark:text-white">14</span> hasil
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="flex items-center justify-center rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700" disabled="">
                                    Sebelumnya
                                </button>
                                <button class="flex items-center justify-center rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700">
                                    Selanjutnya
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- All Files Page -->
            <div id="all_files" class="page">
                <div class="mx-auto max-w-7xl space-y-6">
                    <!-- Filter Section -->
                    <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm p-4 border border-slate-200 dark:border-slate-700 animate-slide-up">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex flex-wrap items-center gap-2">
                                <span class="text-sm font-medium text-slate-700 dark:text-slate-300">Filter:</span>
                                <button class="filter-chip px-3 py-1.5 rounded-full bg-primary/10 text-primary text-xs font-medium" data-filter="all">
                                    Semua Tipe
                                </button>
                                <button class="filter-chip px-3 py-1.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-medium hover:bg-slate-200 dark:hover:bg-slate-600" data-filter="AJB">
                                    AJB
                                </button>
                                <button class="filter-chip px-3 py-1.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-medium hover:bg-slate-200 dark:hover:bg-slate-600" data-filter="SKMHT">
                                    SKMHT
                                </button>
                                <button class="filter-chip px-3 py-1.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-medium hover:bg-slate-200 dark:hover:bg-slate-600" data-filter="APHT">
                                    APHT
                                </button>
                                <div class="h-6 w-px bg-slate-300 dark:bg-slate-600"></div>
                                <button class="filter-chip px-3 py-1.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-medium hover:bg-slate-200 dark:hover:bg-slate-600" data-filter="all-status">
                                    Semua Status
                                </button>
                                <button class="filter-chip px-3 py-1.5 rounded-full bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-xs font-medium hover:bg-red-100 dark:hover:bg-red-900/30" data-filter="overdue">
                                    <span class="h-2 w-2 rounded-full bg-red-500 inline-block mr-1"></span>
                                    Terlambat
                                </button>
                            </div>
                            <button id="moreFiltersBtn" class="text-xs text-slate-500 hover:text-primary dark:text-slate-400 dark:hover:text-primary flex items-center gap-1">
                                <span class="material-symbols-outlined text-[16px]">filter_alt</span>
                                Filter Lainnya
                            </button>
                        </div>
                    </div>
                    
                    <!-- View Toggle -->
                    <div class="flex justify-end">
                        <div class="hidden sm:flex items-center bg-slate-100 dark:bg-slate-800 rounded-lg p-1">
                            <button id="tableViewBtn" class="px-3 py-1.5 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm">
                                <span class="material-symbols-outlined text-[18px]">view_list</span>
                            </button>
                            <button id="cardViewBtn" class="px-3 py-1.5 rounded-md text-slate-600 dark:text-slate-400">
                                <span class="material-symbols-outlined text-[18px]">grid_view</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Table View (Default) -->
                    <div id="tableView" class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 animate-slide-up" style="animation-delay: 0.1s">
                        <!-- Table Header -->
                        <div class="flex flex-wrap items-center justify-between gap-4 border-b border-slate-200 p-4 dark:border-slate-800">
                            <h2 class="text-lg font-bold text-slate-900 dark:text-white">Registry File</h2>
                            <div class="flex items-center gap-2">
                                <button id="exportBtn" class="text-xs text-slate-500 hover:text-primary dark:text-slate-400 dark:hover:text-primary flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">download</span>
                                    Ekspor
                                </button>
                                <button id="refreshBtn" class="text-xs text-slate-500 hover:text-primary dark:text-slate-400 dark:hover:text-primary flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">refresh</span>
                                    Refresh
                                </button>
                            </div>
                        </div>
                        <!-- Table -->
                        <div class="w-full overflow-x-auto">
                            <table class="w-full text-left text-sm">
                                <thead class="bg-slate-50 text-xs font-semibold uppercase text-slate-500 dark:bg-slate-800/50 dark:text-slate-400">
                                    <tr>
                                        <th class="px-6 py-4">No. File</th>
                                        <th class="px-6 py-4">Nama Klien</th>
                                        <th class="px-6 py-4">Tipe Layanan</th>
                                        <th class="px-6 py-4 w-48">Progress</th>
                                        <th class="px-6 py-4">Perkiraan Selesai</th>
                                        <th class="px-6 py-4">Status</th>
                                        <th class="px-6 py-4 text-right">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="filesTableBody" class="divide-y divide-slate-100 dark:divide-slate-800">
                                    <!-- Table rows will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        <!-- Pagination -->
                        <div class="flex items-center justify-between border-t border-slate-200 px-6 py-4 dark:border-slate-800">
                            <div class="text-sm text-slate-500 dark:text-slate-400">
                                Menampilkan <span class="font-medium text-slate-900 dark:text-white">1</span> hingga <span class="font-medium text-slate-900 dark:text-white">5</span> dari <span class="font-medium text-slate-900 dark:text-white">14</span> hasil
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="flex items-center justify-center rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700" disabled="">
                                    Sebelumnya
                                </button>
                                <button class="flex items-center justify-center rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700">
                                    Selanjutnya
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card View (Hidden by default) -->
                    <div id="cardView" class="hidden">
                        <div id="filesCardContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <!-- File cards will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Clients Page -->
            <div id="clients" class="page">
                <div class="mx-auto max-w-7xl space-y-6">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 animate-slide-up">
                        <div class="bg-surface-light dark:bg-surface-dark rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Total Klien</p>
                                    <p class="text-2xl font-bold text-slate-900 dark:text-white">247</p>
                                </div>
                                <div class="p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg">
                                    <span class="material-symbols-outlined text-blue-600 dark:text-blue-400">groups</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-surface-light dark:bg-surface-dark rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Individu</p>
                                    <p class="text-2xl font-bold text-slate-900 dark:text-white">189</p>
                                </div>
                                <div class="p-2 bg-green-100 dark:bg-green-900/30 rounded-lg">
                                    <span class="material-symbols-outlined text-green-600 dark:text-green-400">person</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-surface-light dark:bg-surface-dark rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Perusahaan</p>
                                    <p class="text-2xl font-bold text-slate-900 dark:text-white">58</p>
                                </div>
                                <div class="p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg">
                                    <span class="material-symbols-outlined text-purple-600 dark:text-purple-400">business</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-surface-light dark:bg-surface-dark rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Baru Bulan Ini</p>
                                    <p class="text-2xl font-bold text-slate-900 dark:text-white">12</p>
                                </div>
                                <div class="p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg">
                                    <span class="material-symbols-outlined text-amber-600 dark:text-amber-400">trending_up</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tabs -->
                    <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 animate-slide-up" style="animation-delay: 0.1s">
                        <div class="border-b border-slate-200 dark:border-slate-800">
                            <nav class="flex space-x-8 px-6" aria-label="Tabs">
                                <button class="tab-button active py-4 px-1 text-sm font-medium text-slate-900 dark:text-white" data-tab="all">
                                    Semua Klien
                                </button>
                                <button class="tab-button py-4 px-1 text-sm font-medium text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" data-tab="individuals">
                                    Individu
                                </button>
                                <button class="tab-button py-4 px-1 text-sm font-medium text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" data-tab="companies">
                                    Perusahaan
                                </button>
                                <button class="tab-button py-4 px-1 text-sm font-medium text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" data-tab="recent">
                                    Aktivitas Terkini
                                </button>
                            </nav>
                        </div>
                        
                        <!-- Tab Content -->
                        <div class="p-6">
                            <!-- All Clients Tab -->
                            <div id="all-tab" class="tab-content">
                                <!-- Filter Section -->
                                <div class="flex flex-wrap items-center justify-between gap-4 mb-6">
                                    <div class="flex flex-wrap items-center gap-2">
                                        <span class="text-sm font-medium text-slate-700 dark:text-slate-300">Filter berdasarkan:</span>
                                        <button class="px-3 py-1.5 rounded-full bg-primary/10 text-primary text-xs font-medium">
                                            Semua Tipe
                                        </button>
                                        <button class="px-3 py-1.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-medium hover:bg-slate-200 dark:hover:bg-slate-600">
                                            File Aktif
                                        </button>
                                        <button class="px-3 py-1.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-medium hover:bg-slate-200 dark:hover:bg-slate-600">
                                            Tanpa File
                                        </button>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <button class="text-xs text-slate-500 hover:text-primary dark:text-slate-400 dark:hover:text-primary flex items-center gap-1">
                                            <span class="material-symbols-outlined text-[16px]">download</span>
                                            Ekspor
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Clients Table -->
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 text-xs font-semibold uppercase text-slate-500 dark:bg-slate-800/50 dark:text-slate-400">
                                            <tr>
                                                <th class="px-6 py-4">Klien</th>
                                                <th class="px-6 py-4">Kontak</th>
                                                <th class="px-6 py-4">Tipe</th>
                                                <th class="px-6 py-4">Total File</th>
                                                <th class="px-6 py-4">Aktivitas Terakhir</th>
                                                <th class="px-6 py-4">Status</th>
                                                <th class="px-6 py-4 text-right">Aksi</th>
                                            </tr>
                                        </thead>
                                        <tbody id="clientsTableBody" class="divide-y divide-slate-100 dark:divide-slate-800">
                                            <!-- Client rows will be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                                
                                <!-- Pagination -->
                                <div class="flex items-center justify-between border-t border-slate-200 px-6 py-4 dark:border-slate-800 mt-4">
                                    <div class="text-sm text-slate-500 dark:text-slate-400">
                                        Menampilkan <span class="font-medium text-slate-900 dark:text-white">1</span> hingga <span class="font-medium text-slate-900 dark:text-white">4</span> dari <span class="font-medium text-slate-900 dark:text-white">247</span> hasil
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <button class="flex items-center justify-center rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700" disabled="">
                                            Sebelumnya
                                        </button>
                                        <button class="flex items-center justify-center rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700">
                                            Selanjutnya
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Other tabs (hidden by default) -->
                            <div id="individuals-tab" class="tab-content hidden">
                                <div class="text-center py-12">
                                    <span class="material-symbols-outlined text-6xl text-slate-300 dark:text-slate-600">person</span>
                                    <p class="mt-4 text-lg font-medium text-slate-900 dark:text-white">Klien Individu</p>
                                    <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">Menampilkan 189 klien individu</p>
                                </div>
                            </div>
                            
                            <div id="companies-tab" class="tab-content hidden">
                                <div class="text-center py-12">
                                    <span class="material-symbols-outlined text-6xl text-slate-300 dark:text-slate-600">business</span>
                                    <p class="mt-4 text-lg font-medium text-slate-900 dark:text-white">Klien Perusahaan</p>
                                    <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">Menampilkan 58 klien perusahaan</p>
                                </div>
                            </div>
                            
                            <div id="recent-tab" class="tab-content hidden">
                                <div class="text-center py-12">
                                    <span class="material-symbols-outlined text-6xl text-slate-300 dark:text-slate-600">history</span>
                                    <p class="mt-4 text-lg font-medium text-slate-900 dark:text-white">Aktivitas Terkini</p>
                                    <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">Klien dengan aktivitas file terkini</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- New File Page -->
            <div id="new_file" class="page">
                <div class="mx-auto max-w-7xl space-y-8">
                    <!-- Progress Indicator -->
                    <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm p-4 border border-slate-200 dark:border-slate-700 animate-slide-up">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-lg font-bold text-slate-900 dark:text-white">Progress Pembuatan File</h3>
                            <span class="text-sm font-medium text-slate-500 dark:text-slate-400">Langkah 1 dari 3</span>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="flex items-center gap-2">
                                <div class="h-8 w-8 rounded-full bg-primary flex items-center justify-center text-white text-sm font-bold">1</div>
                                <div class="h-1 w-16 bg-primary"></div>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="h-8 w-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-slate-600 dark:text-slate-300 text-sm font-bold">2</div>
                                <div class="h-1 w-16 bg-slate-200 dark:bg-slate-700"></div>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="h-8 w-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-slate-600 dark:text-slate-300 text-sm font-bold">3</div>
                            </div>
                        </div>
                        <div class="flex justify-between mt-2 text-xs text-slate-500 dark:text-slate-400">
                            <span>Detail File</span>
                            <span>Verifikasi Dokumen</span>
                            <span>Review & Buat</span>
                        </div>
                    </div>
                    
                    <!-- Main Form Content -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Left Column: Form Content (2 cols) -->
                        <div class="lg:col-span-2 space-y-6">
                            <!-- Section 1: General Information -->
                            <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm p-6 border border-slate-200 dark:border-slate-700 animate-slide-up" style="animation-delay: 0.1s">
                                <div class="flex items-center gap-2 mb-6">
                                    <span class="material-symbols-outlined text-primary">description</span>
                                    <h3 class="text-lg font-bold text-slate-900 dark:text-white">Detail File</h3>
                                </div>
                                <form id="newFileForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="col-span-1 md:col-span-2">
                                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Tipe Layanan <span class="text-alert-red">*</span></label>
                                        <div class="relative">
                                            <select id="serviceType" class="form-input block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-3 pl-4 pr-10" required>
                                                <option disabled value="">Pilih tipe layanan</option>
                                                <option value="skmht">SKMHT (Surat Kuasa Membebankan Hak Tanggungan)</option>
                                                <option value="ajb">AJB (Akta Pengikatan Jual Beli)</option>
                                                <option value="fidusia">Akta Jaminan Fidusia</option>
                                                <option value="skmenjual">Akta Surat Kuasa Untuk Menjual</option>
                                                <option value="sewa">Akta Perjanjian Sewa Menyewa</option>
                                                <option value="royac">Akta Consen Roya</option>
                                                <option value="pjkredit">Akta Perjanjian Kredit</option>
                                                <option value="yayasan">Akta Pendirian Yayasan</option>
                                                <option value="pt">Akta Pendirian PT</option>
                                                <option value="cv">Akta Pendirian/Perubahan CV</option>
                                            </select>
                                        </div>
                                        <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">Memilih tipe akan secara otomatis memuat daftar dokumen yang diperlukan di bawah.</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Nama Klien</label>
                                        <input id="clientName" class="form-input block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4 placeholder:text-slate-400" placeholder="contoh: PT Properti Jaya / Bapak Budi" type="text" required/>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Nomor Kontak</label>
                                        <input id="contactNumber" class="form-input block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4 placeholder:text-slate-400" placeholder="+62 812..." type="tel" required/>
                                    </div>
                                    <div class="col-span-1 md:col-span-2">
                                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Alamat Objek</label>
                                        <textarea id="objectAddress" class="form-input block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4 placeholder:text-slate-400 resize-none" placeholder="Alamat lengkap properti atau objek..." rows="2" required></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Target Tanggal Selesai</label>
                                        <div class="relative">
                                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                <span class="material-symbols-outlined text-slate-400 text-[20px]">calendar_today</span>
                                            </div>
                                            <input id="targetCompletionDate" class="form-input block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 pl-10 pr-4" type="date" required/>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Notaris Ditugaskan</label>
                                        <select id="assignedNotary" class="form-input block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4" required>
                                            <option>Dr. Sarah Wijaya, S.H., M.Kn.</option>
                                            <option>Bambang Santoso, S.H.</option>
                                        </select>
                                    </div>
                                </form>
                            </div>
                            
                            <!-- Section 2: Document Verification (Dynamic) -->
                            <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm p-6 border border-slate-200 dark:border-slate-700 relative overflow-hidden animate-slide-up" style="animation-delay: 0.2s">
                                <!-- Left accent border -->
                                <div class="absolute left-0 top-0 bottom-0 w-1 bg-primary"></div>
                                <div class="flex items-center justify-between mb-6">
                                    <div class="flex items-center gap-2">
                                        <span class="material-symbols-outlined text-primary">fact_check</span>
                                        <h3 class="text-lg font-bold text-slate-900 dark:text-white">Dokumen yang Diperlukan</h3>
                                    </div>
                                    <div class="bg-primary/10 text-primary px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1">
                                        <span class="material-symbols-outlined text-[16px]">verified_user</span>
                                        SLA Standar: 3 Hari
                                    </div>
                                </div>
                                <div id="documentRequirements" class="space-y-4">
                                    <!-- Table Header -->
                                    <div class="grid grid-cols-12 gap-4 pb-2 border-b border-slate-200 dark:border-slate-700 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                                        <div class="col-span-5 md:col-span-4 pl-2">Nama Dokumen</div>
                                        <div class="col-span-2 text-center">Diperlukan</div>
                                        <div class="col-span-5 md:col-span-6">Status / Catatan</div>
                                    </div>
                                    <!-- Document items will be populated by JavaScript based on service type -->
                                </div>
                                <div class="mt-6 flex justify-center">
                                    <button id="addCustomDocBtn" class="text-xs font-medium text-primary hover:text-primary-dark flex items-center gap-1 transition-colors" type="button">
                                        <span class="material-symbols-outlined text-[16px]">add</span>
                                        Tambah Persyaratan Dokumen Kustom
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Right Column: Workflow & Actions (1 col) -->
                        <div class="space-y-6">
                            <!-- Workflow Preview -->
                            <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm p-6 border border-slate-200 dark:border-slate-700 animate-slide-up" style="animation-delay: 0.3s">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-base font-bold text-slate-900 dark:text-white">Pratinjau Alur Kerja</h3>
                                    <span class="material-symbols-outlined text-slate-400 text-[20px]">timeline</span>
                                </div>
                                <div class="relative pl-2">
                                    <!-- Vertical Line -->
                                    <div class="absolute left-[11px] top-2 bottom-4 w-0.5 bg-slate-200 dark:bg-slate-700 z-0"></div>
                                    <ul class="space-y-6 relative z-10">
                                        <!-- Workflow steps will be populated by JavaScript based on service type -->
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- Action Panel -->
                            <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm p-6 border border-slate-200 dark:border-slate-700 animate-slide-up" style="animation-delay: 0.4s">
                                <h3 class="text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4">Aksi</h3>
                                <div class="flex items-center justify-between mb-6 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700">
                                    <div class="flex items-center gap-2">
                                        <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">qr_code</span>
                                        <div class="flex flex-col">
                                            <span class="text-sm font-medium text-slate-900 dark:text-white">Pelacakan Klien</span>
                                            <span class="text-[10px] text-slate-500 dark:text-slate-400">Generate QR & Link</span>
                                        </div>
                                    </div>
                                    <label class="inline-flex items-center cursor-pointer">
                                        <input checked class="sr-only peer" type="checkbox" value=""/>
                                        <div class="relative w-9 h-5 bg-slate-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/30 rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-slate-600 peer-checked:bg-primary"></div>
                                    </label>
                                </div>
                                <div class="space-y-3">
                                    <button id="createFileBtn" class="action-button w-full flex justify-center items-center gap-2 rounded-lg bg-primary hover:bg-primary-dark text-white font-semibold py-3 px-4 shadow-sm shadow-primary/30 transition-all active:scale-[0.98]">
                                        <span class="material-symbols-outlined text-[20px]">save</span>
                                        Buat File & Mulai Alur Kerja
                                    </button>
                                    <button id="saveDraftBtn" class="action-button w-full flex justify-center items-center gap-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300 font-medium py-2.5 px-4 transition-all">
                                        Simpan sebagai Draf
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Page -->
            <div id="reports" class="page">
                <div class="mx-auto max-w-7xl space-y-6">
                    <!-- Summary Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 animate-slide-up">
                        <div class="stat-card bg-surface-light dark:bg-surface-dark rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Total File</p>
                                    <p class="text-2xl font-bold text-slate-900 dark:text-white">142</p>
                                    <p class="text-xs text-success-green">+12% dari bulan lalu</p>
                                </div>
                                <div class="p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg">
                                    <span class="material-symbols-outlined text-blue-600 dark:text-blue-400">folder_open</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card bg-surface-light dark:bg-surface-dark rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Selesai</p>
                                    <p class="text-2xl font-bold text-slate-900 dark:text-white">98</p>
                                    <p class="text-xs text-slate-500">69% tingkat penyelesaian</p>
                                </div>
                                <div class="p-2 bg-green-100 dark:bg-green-900/30 rounded-lg">
                                    <span class="material-symbols-outlined text-green-600 dark:text-green-400">check_circle</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card bg-surface-light dark:bg-surface-dark rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Terlambat</p>
                                    <p class="text-2xl font-bold text-alert-red">8</p>
                                    <p class="text-xs text-alert-red">5.6% tingkat keterlambatan</p>
                                </div>
                                <div class="p-2 bg-red-100 dark:bg-red-900/30 rounded-lg">
                                    <span class="material-symbols-outlined text-red-600 dark:text-red-400">warning</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card bg-surface-light dark:bg-surface-dark rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Rata-rata Proses</p>
                                    <p class="text-2xl font-bold text-slate-900 dark:text-white">4.2h</p>
                                    <p class="text-xs text-warning-yellow">+0.5h dari target</p>
                                </div>
                                <div class="p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg">
                                    <span class="material-symbols-outlined text-amber-600 dark:text-amber-400">schedule</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Report Tabs -->
                    <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 animate-slide-up" style="animation-delay: 0.1s">
                        <div class="border-b border-slate-200 dark:border-slate-800">
                            <nav class="flex space-x-8 px-6" aria-label="Report Tabs">
                                <button class="tab-button active py-4 px-1 text-sm font-medium text-slate-900 dark:text-white" data-tab="overview">
                                    Ikhtisar
                                </button>
                                <button class="tab-button py-4 px-1 text-sm font-medium text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" data-tab="performance">
                                    Kinerja
                                </button>
                                <button class="tab-button py-4 px-1 text-sm font-medium text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" data-tab="sla">
                                    Analisis SLA
                                </button>
                                <button class="tab-button py-4 px-1 text-sm font-medium text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" data-tab="clients">
                                    Aktivitas Klien
                                </button>
                            </nav>
                        </div>
                        
                        <!-- Tab Content -->
                        <div class="p-6">
                            <!-- Overview Tab -->
                            <div id="overview-tab" class="tab-content">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <!-- File Status Chart -->
                                    <div class="report-card bg-slate-50 dark:bg-slate-800 rounded-xl p-6">
                                        <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-4">Distribusi Status File</h3>
                                        <div class="chart-container">
                                            <canvas id="statusChart"></canvas>
                                        </div>
                                    </div>
                                    <!-- Service Type Chart -->
                                    <div class="report-card bg-slate-50 dark:bg-slate-800 rounded-xl p-6">
                                        <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-4">Tipe Layanan</h3>
                                        <div class="chart-container">
                                            <canvas id="serviceChart"></canvas>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Monthly Trend -->
                                <div class="mt-6 report-card bg-slate-50 dark:bg-slate-800 rounded-xl p-6">
                                    <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-4">Tren Bulanan</h3>
                                    <div class="chart-container" style="height: 250px;">
                                        <canvas id="trendChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Other tabs (hidden by default) -->
                            <div id="performance-tab" class="tab-content hidden">
                                <div class="text-center py-12">
                                    <span class="material-symbols-outlined text-6xl text-slate-300 dark:text-slate-600">speed</span>
                                    <p class="mt-4 text-lg font-medium text-slate-900 dark:text-white">Analisis Kinerja</p>
                                    <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">Data kinerja staf dan proses</p>
                                </div>
                            </div>
                            
                            <div id="sla-tab" class="tab-content hidden">
                                <div class="text-center py-12">
                                    <span class="material-symbols-outlined text-6xl text-slate-300 dark:text-slate-600">assignment_late</span>
                                    <p class="mt-4 text-lg font-medium text-slate-900 dark:text-white">Analisis SLA</p>
                                    <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">Kepatuhan terhadap Service Level Agreement</p>
                                </div>
                            </div>
                            
                            <div id="clients-tab" class="tab-content hidden">
                                <div class="text-center py-12">
                                    <span class="material-symbols-outlined text-6xl text-slate-300 dark:text-slate-600">groups</span>
                                    <p class="mt-4 text-lg font-medium text-slate-900 dark:text-white">Aktivitas Klien</p>
                                    <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">Statistik dan aktivitas klien</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tracking Page -->
            <div id="tracking" class="page">
                <div class="w-full max-w-4xl mx-auto px-4 pb-12">
                    <!-- Status Card -->
                    <div class="bg-card-light dark:bg-card-dark rounded-2xl shadow-subtle-lift overflow-hidden border border-slate-100 dark:border-slate-800 relative z-10 animate-slide-up">
                        <!-- File Identity Block -->
                        <div class="p-6 md:p-10 border-b border-slate-100 dark:border-slate-700/50">
                            <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-4">
                                <div>
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="px-2.5 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-bold uppercase tracking-wider">Akses Publik</span>
                                        <span class="px-2.5 py-0.5 rounded-full bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 text-xs font-bold uppercase tracking-wider">SKMHT</span>
                                    </div>
                                    <h1 class="text-text-main-light dark:text-text-main-dark text-3xl md:text-4xl font-extrabold leading-tight tracking-tight">File #2023-SKMHT-991</h1>
                                    <div class="flex items-center gap-2 mt-2 text-text-muted-light dark:text-slate-400">
                                        <span class="material-symbols-outlined text-lg">domain</span>
                                        <span class="text-base font-medium">Klien: PT Property Jaya</span>
                                    </div>
                                </div>
                                <div class="shrink-0 text-right hidden md:block">
                                    <p class="text-xs text-slate-400 font-medium uppercase tracking-wider mb-1">Terakhir Diperbarui</p>
                                    <p class="text-sm font-bold text-text-main-light dark:text-text-main-dark">24 Okt 2023</p>
                                </div>
                            </div>
                        </div>
                        <!-- Visual Progress Indicator -->
                        <div class="px-6 md:px-10 py-8 bg-slate-50/50 dark:bg-slate-800/20">
                            <div class="flex flex-col gap-4">
                                <div class="flex justify-between items-end">
                                    <div>
                                        <p class="text-text-main-light dark:text-text-main-dark text-lg font-bold">Penyelesaian Keseluruhan</p>
                                        <p class="text-text-muted-light dark:text-slate-400 text-sm">Perkiraan selesai pada 10 Nov 2023</p>
                                    </div>
                                    <p class="text-primary text-3xl font-extrabold tracking-tight">65%</p>
                                </div>
                                <div class="relative h-4 w-full rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden shadow-inner">
                                    <div class="progress-fill absolute top-0 left-0 h-full rounded-full bg-gradient-to-r from-primary to-[#2abcc8] shadow-[0_0_12px_rgba(31,150,173,0.6)]" style="width: 65%;">
                                        <div class="absolute inset-0 bg-white/20 w-full h-full animate-shimmer" style="background-image: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%); transform: skewX(-20deg);"></div>
                                    </div>
                                </div>
                                <div class="flex justify-between text-xs font-semibold text-slate-400 uppercase tracking-wider mt-1">
                                    <span>Dimulai</span>
                                    <span>Dalam Proses</span>
                                    <span>Selesai</span>
                                </div>
                            </div>
                        </div>
                        <!-- Current Stage Highlight -->
                        <div class="p-6 md:p-10">
                            <div class="flex flex-col md:flex-row gap-6 items-stretch">
                                <!-- Status Card -->
                                <div class="flex-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-100 dark:border-slate-700 p-5 shadow-card flex flex-col gap-3 relative overflow-hidden group hover-lift">
                                    <div class="absolute top-0 left-0 w-1 h-full bg-primary"></div>
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="relative flex h-3 w-3">
                                            <span class="status-indicator absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                                            <span class="relative inline-flex rounded-full h-3 w-3 bg-primary"></span>
                                        </span>
                                        <span class="text-primary text-sm font-bold uppercase tracking-wider">Tahap Saat Ini</span>
                                    </div>
                                    <div>
                                        <h3 class="text-text-main-light dark:text-text-main-dark text-xl font-bold mb-2">Verifikasi di BPN</h3>
                                        <p class="text-text-muted-light dark:text-slate-400 text-sm leading-relaxed">
                                            Kami telah mengajukan berkas fisik Anda dan saat ini menunggu stempel resmi dari Kantor Pertanahan. Proses ini biasanya memakan waktu 3-5 hari kerja.
                                        </p>
                                    </div>
                                    <div class="mt-auto pt-4 flex items-center gap-2 text-xs text-slate-400">
                                        <span class="material-symbols-outlined text-sm">schedule</span>
                                        <span>Dimulai 2 hari yang lalu</span>
                                    </div>
                                </div>
                                <!-- Visual Context Image -->
                                <div class="w-full md:w-48 shrink-0 bg-slate-100 dark:bg-slate-700 rounded-xl overflow-hidden relative shadow-inner group hover-lift">
                                    <!-- Abstract representation of documents being processed -->
                                    <div class="w-full h-full bg-cover bg-center min-h-[140px] opacity-90 transition-transform duration-500 group-hover:scale-110" data-alt="Ilustrasi minimalis abstrak dari dokumen dan stempel kantor" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuD8R-eLSkwoTeZtpz5ErC3o6bT0D015Z2u9UqxWwKQsNkOsyet-GN5zR019lpDynM8bBHL0aGnO9egibTlykLOAQ5Dps4wl_hC-NU1Smbf1WRdEfVsw6_J8c7v6w44h4h_dEOjPzCScAGuLSJz2SIoAygjUrXMn-cFNSHs0gaIAuVI8DXivDid4r1CSoTIBhp2l_ziDi6jMAZ-YE1p0Eww0KHLBBuRUhRtAXKvag6-f9-BUGsr6K_1pqjg7nbCsIoTHw6UMJHqMOVB4');">
                                    </div>
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-3">
                                        <p class="text-white text-xs font-medium flex items-center gap-1">
                                            <span class="material-symbols-outlined text-sm">location_on</span>
                                            <span data-location="Kantor Pertanahan Jakarta">Kantor Pertanahan Jakarta</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Missing Requirements - Red Alert Section -->
                        <div class="bg-alert-bg-light dark:bg-red-900/10 border-t border-red-100 dark:border-red-900/30 p-6 md:p-10">
                            <div class="flex items-start gap-4">
                                <div class="shrink-0 p-3 bg-red-100 dark:bg-red-900/30 text-alert-text dark:text-red-400 rounded-lg">
                                    <span class="material-symbols-outlined text-2xl">warning</span>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-text-main-light dark:text-white text-lg font-bold mb-1">Tindakan Diperlukan: Dokumen Hilang</h3>
                                    <p class="text-text-muted-light dark:text-slate-400 text-sm mb-5">
                                        Harap berikan dokumen berikut untuk melanjutkan ke tahap berikutnya.
                                    </p>
                                    <div class="space-y-3">
                                        <!-- Requirement Item 1 -->
                                        <div class="bg-white dark:bg-slate-800/80 p-4 rounded-lg border border-red-100 dark:border-red-900/20 shadow-sm flex flex-col sm:flex-row sm:items-center justify-between gap-3 hover-lift">
                                            <div class="flex items-center gap-3">
                                                <span class="material-symbols-outlined text-alert-text dark:text-red-400">description</span>
                                                <div>
                                                    <p class="text-text-main-light dark:text-white font-bold text-sm">SPPT PBB Asli 2023</p>
                                                    <p class="text-slate-500 dark:text-slate-400 text-xs mt-0.5">Bukti pembayaran pajak properti untuk tahun berjalan</p>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-2 text-xs font-medium text-alert-text dark:text-red-300 bg-red-50 dark:bg-red-900/20 px-3 py-1.5 rounded-md whitespace-nowrap">
                                                <span class="material-symbols-outlined text-sm">local_shipping</span>
                                                Kirim Asli
                                            </div>
                                        </div>
                                        <!-- Requirement Item 2 -->
                                        <div class="bg-white dark:bg-slate-800/80 p-4 rounded-lg border border-red-100 dark:border-red-900/20 shadow-sm flex flex-col sm:flex-row sm:items-center justify-between gap-3 hover-lift">
                                            <div class="flex items-center gap-3">
                                                <span class="material-symbols-outlined text-alert-text dark:text-red-400">edit_document</span>
                                                <div>
                                                    <p class="text-text-main-light dark:text-white font-bold text-sm">Surat Persetujuan Pasangan</p>
                                                    <p class="text-slate-500 dark:text-slate-400 text-xs mt-0.5">Tanda tangan diperlukan di kertas basah</p>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-2 text-xs font-medium text-alert-text dark:text-red-300 bg-red-50 dark:bg-red-900/20 px-3 py-1.5 rounded-md whitespace-nowrap">
                                                <span class="material-symbols-outlined text-sm">ink_pen</span>
                                                Tanda Tangan Basah
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Timeline (Simplified context) -->
                        <div class="px-6 md:px-10 py-6 border-t border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/20">
                            <button id="toggleTimeline" class="flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-primary transition-colors w-full justify-center group">
                                <span>Lihat Riwayat Lengkap</span>
                                <span class="material-symbols-outlined text-lg transition-transform group-hover:translate-y-0.5">expand_more</span>
                            </button>
                            <div id="timelineContent" class="hidden mt-6 space-y-4">
                                <div class="timeline-item flex gap-4 items-start">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center">
                                        <span class="material-symbols-outlined text-green-600 dark:text-green-400">check_circle</span>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-slate-900 dark:text-white">Pengajuan Dokumen</p>
                                        <p class="text-sm text-slate-500 dark:text-slate-400">Semua dokumen yang diperlukan diterima dan diverifikasi</p>
                                        <p class="text-xs text-slate-400 dark:text-slate-500 mt-1">10 Okt 2023</p>
                                    </div>
                                </div>
                                <div class="timeline-item flex gap-4 items-start">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center">
                                        <span class="material-symbols-outlined text-blue-600 dark:text-blue-400">description</span>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-slate-900 dark:text-white">Proses Awal</p>
                                        <p class="text-sm text-slate-500 dark:text-slate-400">Dokumen disiapkan untuk pengajuan ke BPN</p>
                                        <p class="text-xs text-slate-400 dark:text-slate-500 mt-1">12 Okt 2023</p>
                                    </div>
                                </div>
                                <div class="timeline-item flex gap-4 items-start">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center">
                                        <span class="material-symbols-outlined text-primary">location_on</span>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-slate-900 dark:text-white">Pengajuan ke BPN</p>
                                        <p class="text-sm text-slate-500 dark:text-slate-400">Dokumen fisik diajukan ke Kantor Pertanahan</p>
                                        <p class="text-xs text-slate-400 dark:text-slate-500 mt-1">15 Okt 2023</p>
                                    </div>
                                </div>
                                <div class="timeline-item flex gap-4 items-start">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center">
                                        <span class="material-symbols-outlined text-amber-600 dark:text-amber-400">pending</span>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-slate-900 dark:text-white">Verifikasi di BPN</p>
                                        <p class="text-sm text-slate-500 dark:text-slate-400">Menunggu stempel resmi dari Kantor Pertanahan</p>
                                        <p class="text-xs text-slate-400 dark:text-slate-500 mt-1">22 Okt 2023 - Sedang Berlangsung</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Support Info Footer -->
                    <div class="mt-8 text-center space-y-2 animate-slide-up" style="animation-delay: 0.2s">
                        <p class="text-slate-500 dark:text-slate-400 text-sm">
                            Butuh bantuan memahami status ini?
                        </p>
                        <div class="inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-full shadow-sm border border-slate-100 dark:border-slate-700 text-sm font-semibold text-text-main-light dark:text-white hover:text-primary dark:hover:text-primary transition-colors cursor-pointer hover-lift">
                            <span class="material-symbols-outlined text-lg">call</span>
                            <span>Hubungi Kantor Notaris: (021) 555-1234</span>
                        </div>
                    </div>
                    <div class="mt-8 flex justify-center gap-4 opacity-40 hover:opacity-100 transition-opacity animate-slide-up" style="animation-delay: 0.3s">
                        <img alt="Secure SSL" class="grayscale h-6" data-alt="Ikon lencana keamanan" src="https://lh3.googleusercontent.com/aida-public/AB6AXuC4t-QKbMbh-jrs8jdjZ72uLMPBrjZsWj7ygeVB-wfTKDyfEC1Q2BeQTQTMERjW59AYh-zb4Q2iGh40_ti08ywyvgQgfB-DbxV8c_3vf8eTO7vfk5w4knT3t50u5-Qz5EuvgFvp3TiIxd6gDtFwWl5e5JUINWfO-qoJ70tzNky9jJG7DN3jXHonfkaltuuhks0zB3eceEFVm9eaimnRWhRKEPFoce6BZ6ZAP0d3IeLAec3vvH0Oypi_SnGcl8dINPW4bBjnqicnsKP9"/>
                        <span class="text-xs text-slate-400 items-center flex">Tampilan Publik Aman</span>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- Add Client Modal -->
<div id="addClientModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-xl w-full max-w-md mx-4 animate-slide-up">
        <div class="flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800">
            <h3 class="text-lg font-bold text-slate-900 dark:text-white">Tambah Klien Baru</h3>
            <button id="closeModalBtn" class="p-1 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800">
                <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">close</span>
            </button>
        </div>
        <div class="p-6 space-y-4">
            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Tipe Klien</label>
                <select id="clientType" class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4">
                    <option>Individu</option>
                    <option>Perusahaan</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Nama Lengkap / Nama Perusahaan</label>
                <input type="text" id="newClientName" class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4" placeholder="Masukkan nama">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Nomor Telepon</label>
                <input type="tel" id="newClientPhone" class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4" placeholder="+62 812-3456-7890">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Alamat Email</label>
                <input type="email" id="newClientEmail" class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4" placeholder="email@example.com">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">Alamat</label>
                <textarea id="newClientAddress" class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4" rows="3" placeholder="Masukkan alamat"></textarea>
            </div>
        </div>
        <div class="flex items-center justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-800">
            <button id="cancelModalBtn" class="px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-medium hover:bg-slate-50 dark:hover:bg-slate-700">
                Batal
            </button>
            <button id="saveClientBtn" class="px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-primary-dark">
                Tambah Klien
            </button>
        </div>
    </div>
</div>

<!-- File Details Modal -->
<div id="fileDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto animate-slide-up">
        <div class="flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800">
            <h3 class="text-lg font-bold text-slate-900 dark:text-white">Detail File</h3>
            <button id="closeFileDetailsBtn" class="p-1 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800">
                <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">close</span>
            </button>
        </div>
        <div id="fileDetailsContent" class="p-6">
            <!-- File details will be populated by JavaScript -->
        </div>
    </div>
</div>

<!-- Client Details Modal -->
<div id="clientDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto animate-slide-up">
        <div class="flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800">
            <h3 class="text-lg font-bold text-slate-900 dark:text-white">Detail Klien</h3>
            <button id="closeClientDetailsBtn" class="p-1 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800">
                <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">close</span>
            </button>
        </div>
        <div id="clientDetailsContent" class="p-6">
            <!-- Client details will be populated by JavaScript -->
        </div>
    </div>
</div>

<!-- Notification Panel -->
<div id="notificationPanel" class="fixed top-16 right-6 w-80 bg-surface-light dark:bg-surface-dark rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 p-4 hidden z-40 animate-slide-up">
    <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-bold text-slate-900 dark:text-white">Notifikasi</h3>
        <button id="closeNotificationBtn" class="p-1 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800">
            <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">close</span>
        </button>
    </div>
    <div id="notificationList" class="space-y-3 max-h-96 overflow-y-auto">
        <!-- Notifications will be populated by JavaScript -->
    </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-xl w-full max-w-md mx-4 animate-slide-up">
        <div class="flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800">
            <h3 class="text-lg font-bold text-slate-900 dark:text-white">Pengaturan</h3>
            <button id="closeSettingsBtn" class="p-1 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800">
                <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">close</span>
            </button>
        </div>
        <div class="p-6 space-y-4">
            <div class="flex items-center justify-between">
                <div>
                    <p class="font-medium text-slate-900 dark:text-white">Mode Gelap</p>
                    <p class="text-sm text-slate-500 dark:text-slate-400">Aktifkan tema gelap</p>
                </div>
                <label class="inline-flex items-center cursor-pointer">
                    <input id="darkModeToggleModal" class="sr-only peer" type="checkbox" value=""/>
                    <div class="relative w-9 h-5 bg-slate-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/30 rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-slate-600 peer-checked:bg-primary"></div>
                </label>
            </div>
            <div class="flex items-center justify-between">
                <div>
                    <p class="font-medium text-slate-900 dark:text-white">Notifikasi</p>
                    <p class="text-sm text-slate-500 dark:text-slate-400">Terima notifikasi browser</p>
                </div>
                <label class="inline-flex items-center cursor-pointer">
                    <input id="notificationToggle" class="sr-only peer" type="checkbox" value="" checked/>
                    <div class="relative w-9 h-5 bg-slate-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/30 rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-slate-600 peer-checked:bg-primary"></div>
                </label>
            </div>
            <div>
                <p class="font-medium text-slate-900 dark:text-white mb-2">Bahasa</p>
                <select class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4">
                    <option>Bahasa Indonesia</option>
                    <option>English</option>
                </select>
            </div>
            <div>
                <p class="font-medium text-slate-900 dark:text-white mb-2">Format Tanggal</p>
                <select class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary py-2.5 px-4">
                    <option>DD/MM/YYYY</option>
                    <option>MM/DD/YYYY</option>
                    <option>YYYY-MM-DD</option>
                </select>
            </div>
        </div>
        <div class="flex items-center justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-800">
            <button id="cancelSettingsBtn" class="px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-medium hover:bg-slate-50 dark:hover:bg-slate-700">
                Batal
            </button>
            <button id="saveSettingsBtn" class="px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-primary-dark">
                Simpan
            </button>
        </div>
    </div>
</div>

<script>
    // Service Requirements Mapping
    const serviceRequirements = {
        'skmht': [
            { name: 'KTP (Suami & Istri)', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'NPWP', description: 'Tax ID yang Valid', required: 'Mandatory', status: 'checked' },
            { name: 'Sertifikat Asli (SHM/SHGB)', description: 'Bukti kepemilikan', required: 'Mandatory', status: 'unchecked', note: 'Saat ini dalam Penjagaan Bank', noteType: 'warning' },
            { name: 'PBB (Tahun Terakhir)', description: 'Bukti pembayaran pajak', required: 'Secondary', status: 'unchecked' },
            { name: 'Surat Kuasa dari Bank', description: 'Jika sertifikat dalam penjagaan bank', required: 'Secondary', status: 'unchecked' }
        ],
        'ajb': [
            { name: 'KTP (Pembeli & Penjual)', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'Sertifikat Asli (SHM/SHGB)', description: 'Bukti kepemilikan', required: 'Mandatory', status: 'checked' },
            { name: 'PBB (Tahun Terakhir)', description: 'Bukti pembayaran pajak', required: 'Mandatory', status: 'unchecked' },
            { name: 'Surat Kuasa', description: 'Jika diwakilkan', required: 'Secondary', status: 'unchecked' },
            { name: 'Bukti Pembayaran BPHTB', description: 'Bukti pembayaran Bea Perolehan Hak', required: 'Mandatory', status: 'unchecked' }
        ],
        'apht': [
            { name: 'KTP (Debitur)', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'NPWP', description: 'Tax ID yang Valid', required: 'Mandatory', status: 'checked' },
            { name: 'Sertifikat Asli (SHM/SHGB)', description: 'Bukti kepemilikan', required: 'Mandatory', status: 'unchecked' },
            { name: 'PBB (Tahun Terakhir)', description: 'Bukti pembayaran pajak', required: 'Mandatory', status: 'unchecked' },
            { name: 'Surat Pernyataan', description: 'Dari pemberi jaminan', required: 'Secondary', status: 'unchecked' },
            { name: 'Perjanjian Kredit', description: 'Dari pemberi kredit', required: 'Mandatory', status: 'unchecked' }
        ],
        'fidusia': [
            { name: 'KTP (Pemberi & Penerima Fidusia)', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'NPWP', description: 'Tax ID yang Valid', required: 'Mandatory', status: 'checked' },
            { name: 'Akta Pendirian Perusahaan', description: 'Jika badan hukum', required: 'Mandatory', status: 'unchecked' },
            { name: 'Daftar Inventaris', description: 'Detail benda yang menjadi objek fidusia', required: 'Mandatory', status: 'unchecked' }
        ],
        'skmenjual': [
            { name: 'KTP Pemberi Kuasa', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'Sertifikat Asli (SHM/SHGB)', description: 'Bukti kepemilikan', required: 'Mandatory', status: 'checked' },
            { name: 'PBB (Tahun Terakhir)', description: 'Bukti pembayaran pajak', required: 'Mandatory', status: 'unchecked' }
        ],
        'sewa': [
            { name: 'KTP (Penyewa & Pemilik)', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'Sertifikat Asli (SHM/SHGB)', description: 'Bukti kepemilikan', required: 'Mandatory', status: 'checked' },
            { name: 'PBB (Tahun Terakhir)', description: 'Bukti pembayaran pajak', required: 'Mandatory', status: 'unchecked' }
        ],
        'royac': [
            { name: 'KTP Semua Pihak', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'Sertifikat Asli (SHM/SHGB)', description: 'Bukti kepemilikan', required: 'Mandatory', status: 'checked' },
            { name: 'PBB (Tahun Terakhir)', description: 'Bukti pembayaran pajak', required: 'Mandatory', status: 'unchecked' }
        ],
        'pjkredit': [
            { name: 'KTP (Debitur & Penjamin)', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'NPWP', description: 'Tax ID yang Valid', required: 'Mandatory', status: 'checked' },
            { name: 'Sertifikat Jaminan', description: 'Jika ada jaminan', required: 'Secondary', status: 'unchecked' }
        ],
        'yayasan': [
            { name: 'KTP Pendiri', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'NPWP', description: 'Tax ID yang Valid', required: 'Mandatory', status: 'checked' },
            { name: 'Anggaran Dasar', description: 'AD Yayasan', required: 'Mandatory', status: 'unchecked' },
            { name: 'Surat Keterangan Domisili', description: 'Dari kelurahan setempat', required: 'Mandatory', status: 'unchecked' }
        ],
        'pt': [
            { name: 'KTP Pendiri', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'NPWP', description: 'Tax ID yang Valid', required: 'Mandatory', status: 'checked' },
            { name: 'Akta Pendirian', description: 'Dari notaris', required: 'Mandatory', status: 'unchecked' },
            { name: 'Surat Keterangan Domisili Perusahaan', description: 'Dari kelurahan setempat', required: 'Mandatory', status: 'unchecked' },
            { name: 'NIB', description: 'Nomor Induk Berusaha', required: 'Mandatory', status: 'unchecked' }
        ],
        'cv': [
            { name: 'KTP Pendiri', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'NPWP', description: 'Tax ID yang Valid', required: 'Mandatory', status: 'checked' },
            { name: 'Akta Pendirian', description: 'Dari notaris', required: 'Mandatory', status: 'unchecked' },
            { name: 'Surat Keterangan Domisili Usaha', description: 'Dari kelurahan setempat', required: 'Mandatory', status: 'unchecked' }
        ],
        'default': [
            { name: 'KTP', description: 'Asli / Salinan Legalisir', required: 'Mandatory', status: 'checked' },
            { name: 'NPWP', description: 'Tax ID yang Valid', required: 'Mandatory', status: 'unchecked' },
            { name: 'Dokumen Pendukung', description: 'Sesuai kebutuhan', required: 'Secondary', status: 'unchecked' }
        ]
    };

    // Workflow Steps Mapping
    const workflowSteps = {
        'skmht': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Pemeriksaan Kelengkapan Dokumen', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Verifikasi di BPN', status: 'pending', description: 'Perkiraan: 3-5 Hari' },
            { name: 'Validasi Pajak', status: 'pending', description: 'Menunggu pembayaran' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Klien' },
            { name: 'Pengajuan ke BPN', status: 'pending', description: 'Proses pendaftaran' }
        ],
        'ajb': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Pemeriksaan Dokumen', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Verifikasi Pajak (BPHTB)', status: 'pending', description: 'Perkiraan: 2-3 Hari' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Kedua Belah Pihak' },
            { name: 'Balik Nama di BPN', status: 'pending', description: 'Perkiraan: 7-14 Hari' }
        ],
        'apht': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Verifikasi Dokumen Jaminan', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Pemeriksaan di BPN', status: 'pending', description: 'Perkiraan: 2-3 Hari' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Debitur' },
            { name: 'Pendaftaran di BPN', status: 'pending', description: 'Perkiraan: 3-5 Hari' }
        ],
        'fidusia': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Pemeriksaan Kelengkapan Dokumen', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Verifikasi Benda Fidusia', status: 'pending', description: 'Perkiraan: 1-2 Hari' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Kedua Belah Pihak' },
            { name: 'Pendaftaran Fidusia', status: 'pending', description: 'Perkiraan: 3 Hari' }
        ],
        'skmenjual': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Verifikasi Dokumen', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Proses Persiapan Akta', status: 'pending', description: 'Perkiraan: 2 Hari' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Pemberi Kuasa' }
        ],
        'sewa': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Verifikasi Dokumen', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Kedua Belah Pihak' },
            { name: 'Pendaftaran (Jika Diperlukan)', status: 'pending', description: 'Opsional' }
        ],
        'royac': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Verifikasi Dokumen', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Semua Pihak' },
            { name: 'Proses di BPN', status: 'pending', description: 'Perkiraan: 3-5 Hari' }
        ],
        'pjkredit': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Verifikasi Dokumen', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Analisis Kredit', status: 'pending', description: 'Perkiraan: 2-3 Hari' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Kedua Belah Pihak' }
        ],
        'yayasan': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Verifikasi Kelengkapan Dokumen', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Proses Pembuatan Akta', status: 'pending', description: 'Perkiraan: 2-3 Hari' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Pendiri' },
            { name: 'Pendaftaran ke Kemenkumham', status: 'pending', description: 'Perkiraan: 5-7 Hari' }
        ],
        'pt': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Verifikasi Kelengkapan Dokumen', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Proses Pembuatan Akta', status: 'pending', description: 'Perkiraan: 3-4 Hari' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Pendiri' },
            { name: 'Pendaftaran ke AHU', status: 'pending', description: 'Perkiraan: 3-5 Hari' }
        ],
        'cv': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Verifikasi Kelengkapan Dokumen', status: 'pending', description: 'Perkiraan: 1 Hari' },
            { name: 'Proses Pembuatan Akta', status: 'pending', description: 'Perkiraan: 2-3 Hari' },
            { name: 'Penandatanganan Akta', status: 'pending', description: 'Memerlukan Kehadiran Pendiri' }
        ],
        'default': [
            { name: 'Entri & Verifikasi Data', status: 'current', description: 'Langkah Saat Ini' },
            { name: 'Verifikasi Dokumen', status: 'pending', description: 'Perkiraan: 1-2 Hari' },
            { name: 'Proses Sesuai Ketentuan', status: 'pending', description: 'Menyesuaikan jenis layanan' },
            { name: 'Penyelesaian', status: 'pending', description: 'Finalisasi dokumen' }
        ]
    };

    // Data Storage
    let appData = {
        files: [
            {
                id: "2024/05/019",
                clientName: "PT. Maju Jaya",
                serviceType: "SKMHT",
                progress: 80,
                status: "Overdue",
                estimatedCompletion: "01 Oct 2024",
                daysOverdue: 3,
                currentStage: "Validation",
                stageStatus: "Stalled",
                assignedNotary: "Dr. Sarah Wijaya, S.H., M.Kn.",
                contactNumber: "+62 21-555-1234",
                email: "info@majujaya.com",
                objectAddress: "Jl. Sudirman No. 123, Jakarta Pusat",
                createdDate: "15 Sep 2024",
                lastUpdated: "28 Sep 2024",
                notes: "Menunggu dokumen tambahan dari klien"
            },
            {
                id: "2024/05/042",
                clientName: "Budi Santoso",
                serviceType: "AJB",
                progress: 40,
                status: "In Progress",
                estimatedCompletion: "12 Oct 2024",
                daysOverdue: 0,
                currentStage: "Drafting",
                stageStatus: "In Progress",
                assignedNotary: "Bambang Santoso, S.H.",
                contactNumber: "+62 812-3456-7890",
                email: "budi@email.com",
                objectAddress: "Jl. Gatot Subroto No. 456, Jakarta Selatan",
                createdDate: "20 Sep 2024",
                lastUpdated: "28 Sep 2024",
                notes: "Dokumen sedang disiapkan"
            },
            {
                id: "2024/05/041",
                clientName: "Dewi Lestari",
                serviceType: "SKMHT",
                progress: 90,
                status: "Reviewing",
                estimatedCompletion: "08 Oct 2024",
                daysOverdue: 0,
                currentStage: "Signing",
                stageStatus: "In Progress",
                assignedNotary: "Dr. Sarah Wijaya, S.H., M.Kn.",
                contactNumber: "+62 813-9876-5432",
                email: "dewi.les@email.com",
                objectAddress: "Jl. Thamrin No. 789, Jakarta Pusat",
                createdDate: "18 Sep 2024",
                lastUpdated: "27 Sep 2024",
                notes: "Menunggu jadwal penandatanganan"
            },
            {
                id: "2024/04/112",
                clientName: "CV. Abadi Sentosa",
                serviceType: "APHT",
                progress: 65,
                status: "Overdue",
                estimatedCompletion: "29 Sep 2024",
                daysOverdue: 5,
                currentStage: "Registration",
                stageStatus: "Blocked",
                assignedNotary: "Bambang Santoso, S.H.",
                contactNumber: "+62 22-765-4321",
                email: "admin@abadi.co.id",
                objectAddress: "Jl. Merdeka No. 321, Bandung",
                createdDate: "10 Sep 2024",
                lastUpdated: "25 Sep 2024",
                notes: "Proses pendaftaran terhambat karena masalah administratif"
            },
            {
                id: "2024/05/039",
                clientName: "Hendro Mulyono",
                serviceType: "AJB",
                progress: 25,
                status: "Waiting Client",
                estimatedCompletion: "15 Oct 2024",
                daysOverdue: 0,
                currentStage: "Tax Check",
                stageStatus: "In Progress",
                assignedNotary: "Dr. Sarah Wijaya, S.H., M.Kn.",
                contactNumber: "+62 811-222-3333",
                email: "hendro@email.com",
                objectAddress: "Jl. Rasuna Said No. 567, Jakarta Selatan",
                createdDate: "22 Sep 2024",
                lastUpdated: "28 Sep 2024",
                notes: "Menunggu dokumen pajak dari klien"
            }
        ],
        clients: [
            {
                id: "CLI-001",
                name: "Budi Santoso",
                type: "Individual",
                contactNumber: "+62 812-3456-7890",
                email: "budi@email.com",
                address: "Jl. Gatot Subroto No. 456, Jakarta Selatan",
                totalFiles: 3,
                activeFiles: 2,
                lastActivity: "2 days ago",
                status: "Active"
            },
            {
                id: "CLI-002",
                name: "PT. Maju Jaya",
                type: "Company",
                contactNumber: "+62 21-555-1234",
                email: "info@majujaya.com",
                address: "Jl. Sudirman No. 123, Jakarta Pusat",
                totalFiles: 7,
                activeFiles: 3,
                lastActivity: "1 week ago",
                status: "Pending"
            },
            {
                id: "CLI-003",
                name: "Dewi Lestari",
                type: "Individual",
                contactNumber: "+62 813-9876-5432",
                email: "dewi.les@email.com",
                address: "Jl. Thamrin No. 789, Jakarta Pusat",
                totalFiles: 2,
                activeFiles: 1,
                lastActivity: "3 days ago",
                status: "Active"
            },
            {
                id: "CLI-004",
                name: "CV. Abadi Sentosa",
                type: "Company",
                contactNumber: "+62 22-765-4321",
                email: "admin@abadi.co.id",
                address: "Jl. Merdeka No. 321, Bandung",
                totalFiles: 5,
                activeFiles: 2,
                lastActivity: "2 weeks ago",
                status: "Inactive"
            }
        ],
        notifications: [
            {
                id: 1,
                title: "File Terlambat",
                message: "File #2024/05/019 untuk PT. Maju Jaya terlambat 3 hari",
                type: "warning",
                read: false,
                timestamp: "2 hours ago"
            },
            {
                id: 2,
                title: "Dokumen Diperlukan",
                message: "File #2024/04/112 membutuhkan dokumen tambahan",
                type: "info",
                read: false,
                timestamp: "5 hours ago"
            },
            {
                id: 3,
                title: "File Selesai",
                message: "File #2024/05/041 untuk Dewi Lestari telah selesai",
                type: "success",
                read: true,
                timestamp: "1 day ago"
            }
        ],
        settings: {
            darkMode: false,
            notifications: true,
            language: "id",
            dateFormat: "DD/MM/YYYY"
        }
    };

    // Initialize app
    document.addEventListener('DOMContentLoaded', function() {
        // Load data from localStorage if available
        const storedData = localStorage.getItem('notaryDocData');
        if (storedData) {
            appData = JSON.parse(storedData);
        }
        
        // Initialize UI
        initializeRouting();
        initializeEventListeners();
        updateDashboard();
        updateFilesTable();
        updateClientsTable();
        updateNotifications();
        initializeCharts();
        
        // Apply settings
        applySettings();
        
        // Initialize with default service type
        const defaultServiceType = document.getElementById('serviceType').value || 'skmht';
        updateDocumentRequirements(defaultServiceType);
        updateWorkflowPreview(defaultServiceType);
    });

    // Routing
    function initializeRouting() {
        // Handle navigation clicks
        const navLinks = document.querySelectorAll('.sidebar-link[data-page]');
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const page = this.getAttribute('data-page');
                navigateToPage(page);
            });
        });
        
        // Handle create new button
        document.getElementById('createNewBtn').addEventListener('click', function() {
            navigateToPage('new_file');
        });
    }

    function navigateToPage(pageId) {
        // Hide all pages
        const pages = document.querySelectorAll('.page');
        pages.forEach(page => {
            page.classList.remove('active');
        });
        
        // Show selected page
        const selectedPage = document.getElementById(pageId);
        if (selectedPage) {
            selectedPage.classList.add('active');
        }
        
        // Update sidebar active state
        const navLinks = document.querySelectorAll('.sidebar-link[data-page]');
        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('data-page') === pageId) {
                link.classList.add('active');
            }
        });
        
        // Update page title
        const pageTitle = document.getElementById('pageTitle');
        if (pageTitle) {
            const titles = {
                'dashboard': 'Dashboard',
                'new_file': 'File Baru',
                'all_files': 'Semua File',
                'clients': 'Klien',
                'reports': 'Laporan',
                'tracking': 'Pelacakan Publik'
            };
            pageTitle.textContent = titles[pageId] || 'NotaryDoc';
        }
        
        // Initialize page-specific content
        if (pageId === 'dashboard') {
            updateDashboard();
        } else if (pageId === 'all_files') {
            updateFilesTable();
        } else if (pageId === 'clients') {
            updateClientsTable();
        } else if (pageId === 'reports') {
            initializeCharts();
        }
    }

    // Event Listeners
    function initializeEventListeners() {
    // Dark mode toggle
    const darkModeToggle = document.getElementById('darkModeToggle');
    if (darkModeToggle) {
        darkModeToggle.addEventListener('click', function() {
            toggleDarkMode();
        });
    }
    
    const darkModeToggleModal = document.getElementById('darkModeToggleModal');
    if (darkModeToggleModal) {
        darkModeToggleModal.addEventListener('click', function() {
            toggleDarkMode();
        });
    }
    
    // Mobile menu toggle
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    if (mobileMenuToggle) {
        mobileMenuToggle.addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar) {
                sidebar.classList.toggle('hidden');
            }
        });
    }
    
    // Notification panel
    const notificationBtn = document.getElementById('notificationBtn');
    if (notificationBtn) {
        notificationBtn.addEventListener('click', function() {
            toggleNotificationPanel();
        });
    }
    
    const closeNotificationBtn = document.getElementById('closeNotificationBtn');
    if (closeNotificationBtn) {
        closeNotificationBtn.addEventListener('click', function() {
            const notificationPanel = document.getElementById('notificationPanel');
            if (notificationPanel) {
                notificationPanel.classList.add('hidden');
            }
        });
    }
    
    // Settings modal
    const settingsBtn = document.getElementById('settingsBtn');
    if (settingsBtn) {
        settingsBtn.addEventListener('click', function() {
            const settingsModal = document.getElementById('settingsModal');
            if (settingsModal) {
                settingsModal.classList.remove('hidden');
                settingsModal.classList.add('flex');
            }
        });
    }
    
    const closeSettingsBtn = document.getElementById('closeSettingsBtn');
    if (closeSettingsBtn) {
        closeSettingsBtn.addEventListener('click', function() {
            const settingsModal = document.getElementById('settingsModal');
            if (settingsModal) {
                settingsModal.classList.add('hidden');
                settingsModal.classList.remove('flex');
            }
        });
    }
    
    const cancelSettingsBtn = document.getElementById('cancelSettingsBtn');
    if (cancelSettingsBtn) {
        cancelSettingsBtn.addEventListener('click', function() {
            const settingsModal = document.getElementById('settingsModal');
            if (settingsModal) {
                settingsModal.classList.add('hidden');
                settingsModal.classList.remove('flex');
            }
        });
    }
    
    const saveSettingsBtn = document.getElementById('saveSettingsBtn');
    if (saveSettingsBtn) {
        saveSettingsBtn.addEventListener('click', function() {
            saveSettings();
            const settingsModal = document.getElementById('settingsModal');
            if (settingsModal) {
                settingsModal.classList.add('hidden');
                settingsModal.classList.remove('flex');
            }
        });
    }
    
    // Add client modal
    const addClientBtn = document.getElementById('addClientBtn');
    if (addClientBtn) {
        addClientBtn.addEventListener('click', function() {
            const addClientModal = document.getElementById('addClientModal');
            if (addClientModal) {
                addClientModal.classList.remove('hidden');
                addClientModal.classList.add('flex');
            }
        });
    }
    
    const closeModalBtn = document.getElementById('closeModalBtn');
    if (closeModalBtn) {
        closeModalBtn.addEventListener('click', function() {
            const addClientModal = document.getElementById('addClientModal');
            if (addClientModal) {
                addClientModal.classList.add('hidden');
                addClientModal.classList.remove('flex');
            }
        });
    }
    
    const cancelModalBtn = document.getElementById('cancelModalBtn');
    if (cancelModalBtn) {
        cancelModalBtn.addEventListener('click', function() {
            const addClientModal = document.getElementById('addClientModal');
            if (addClientModal) {
                addClientModal.classList.add('hidden');
                addClientModal.classList.remove('flex');
            }
        });
    }
    
    const saveClientBtn = document.getElementById('saveClientBtn');
    if (saveClientBtn) {
        saveClientBtn.addEventListener('click', function() {
            addNewClient();
            const addClientModal = document.getElementById('addClientModal');
            if (addClientModal) {
                addClientModal.classList.add('hidden');
                addClientModal.classList.remove('flex');
            }
        });
    }
    
    // File details modal
    const closeFileDetailsBtn = document.getElementById('closeFileDetailsBtn');
    if (closeFileDetailsBtn) {
        closeFileDetailsBtn.addEventListener('click', function() {
            const fileDetailsModal = document.getElementById('fileDetailsModal');
            if (fileDetailsModal) {
                fileDetailsModal.classList.add('hidden');
                fileDetailsModal.classList.remove('flex');
            }
        });
    }
    
    // Client details modal
    const closeClientDetailsBtn = document.getElementById('closeClientDetailsBtn');
    if (closeClientDetailsBtn) {
        closeClientDetailsBtn.addEventListener('click', function() {
            const clientDetailsModal = document.getElementById('clientDetailsModal');
            if (clientDetailsModal) {
                clientDetailsModal.classList.add('hidden');
                clientDetailsModal.classList.remove('flex');
            }
        });
    }
    
    // New file form
    const serviceType = document.getElementById('serviceType');
    if (serviceType) {
        serviceType.addEventListener('change', function() {
            updateDocumentRequirements(this.value);
            updateWorkflowPreview(this.value);
        });
    }
    
    const createFileBtn = document.getElementById('createFileBtn');
    if (createFileBtn) {
        createFileBtn.addEventListener('click', function() {
            createNewFile();
        });
    }
    
    const saveDraftBtn = document.getElementById('saveDraftBtn');
    if (saveDraftBtn) {
        saveDraftBtn.addEventListener('click', function() {
            saveDraftFile();
        });
    }
    
    const addCustomDocBtn = document.getElementById('addCustomDocBtn');
    if (addCustomDocBtn) {
        addCustomDocBtn.addEventListener('click', function() {
            addCustomDocument();
        });
    }
    
    // View toggle for files page
    const tableViewBtn = document.getElementById('tableViewBtn');
    if (tableViewBtn) {
        tableViewBtn.addEventListener('click', function() {
            const tableView = document.getElementById('tableView');
            const cardView = document.getElementById('cardView');
            const cardViewBtn = document.getElementById('cardViewBtn');
            
            if (tableView && cardView && cardViewBtn) {
                tableView.classList.remove('hidden');
                cardView.classList.add('hidden');
                
                this.classList.add('bg-white', 'dark:bg-slate-700', 'text-slate-900', 'dark:text-white', 'shadow-sm');
                this.classList.remove('text-slate-600', 'dark:text-slate-400');
                cardViewBtn.classList.remove('bg-white', 'dark:bg-slate-700', 'text-slate-900', 'dark:text-white', 'shadow-sm');
                cardViewBtn.classList.add('text-slate-600', 'dark:text-slate-400');
            }
        });
    }
    
    const cardViewBtn = document.getElementById('cardViewBtn');
    if (cardViewBtn) {
        cardViewBtn.addEventListener('click', function() {
            const tableView = document.getElementById('tableView');
            const cardView = document.getElementById('cardView');
            const tableViewBtn = document.getElementById('tableViewBtn');
            
            if (tableView && cardView && tableViewBtn) {
                tableView.classList.add('hidden');
                cardView.classList.remove('hidden');
                
                this.classList.add('bg-white', 'dark:bg-slate-700', 'text-slate-900', 'dark:text-white', 'shadow-sm');
                this.classList.remove('text-slate-600', 'dark:text-slate-400');
                tableViewBtn.classList.remove('bg-white', 'dark:bg-slate-700', 'text-slate-900', 'dark:text-white', 'shadow-sm');
                tableViewBtn.classList.add('text-slate-600', 'dark:text-slate-400');
                
                updateFilesCardView();
            }
        });
    }
    
    // Filter chips for files page
    const filterChips = document.querySelectorAll('.filter-chip');
    filterChips.forEach(chip => {
        chip.addEventListener('click', function() {
            // Remove active state from all chips
            filterChips.forEach(c => {
                c.classList.remove('bg-primary/10', 'text-primary');
                c.classList.add('bg-slate-100', 'dark:bg-slate-700', 'text-slate-600', 'dark:text-slate-300');
            });
            
            // Add active state to clicked chip
            this.classList.remove('bg-slate-100', 'dark:bg-slate-700', 'text-slate-600', 'dark:text-slate-300');
            this.classList.add('bg-primary/10', 'text-primary');
            
            // Filter files
            const filterType = this.getAttribute('data-filter');
            filterFiles(filterType);
        });
    });
    
    // Tabs for reports page
    const reportTabButtons = document.querySelectorAll('#reports .tab-button');
    reportTabButtons.forEach(button => {
        button.addEventListener('click', function() {
            const targetTab = this.getAttribute('data-tab');
            
            // Update button states
            reportTabButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.classList.add('text-slate-500', 'hover:text-slate-700', 'dark:text-slate-400', 'dark:hover:text-slate-300');
                btn.classList.remove('text-slate-900', 'dark:text-white');
            });
            
            this.classList.add('active');
            this.classList.remove('text-slate-500', 'hover:text-slate-700', 'dark:text-slate-400', 'dark:hover:text-slate-300');
            this.classList.add('text-slate-900', 'dark:text-white');
            
            // Show/hide tab content
            const tabContents = document.querySelectorAll('#reports .tab-content');
            tabContents.forEach(content => {
                content.classList.add('hidden');
            });
            
            const targetTabElement = document.getElementById(`${targetTab}-tab`);
            if (targetTabElement) {
                targetTabElement.classList.remove('hidden');
            }
        });
    });
    
    // Tabs for clients page
    const clientTabButtons = document.querySelectorAll('#clients .tab-button');
    clientTabButtons.forEach(button => {
        button.addEventListener('click', function() {
            const targetTab = this.getAttribute('data-tab');
            
            // Update button states
            clientTabButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.classList.add('text-slate-500', 'hover:text-slate-700', 'dark:text-slate-400', 'dark:hover:text-slate-300');
                btn.classList.remove('text-slate-900', 'dark:text-white');
            });
            
            this.classList.add('active');
            this.classList.remove('text-slate-500', 'hover:text-slate-700', 'dark:text-slate-400', 'dark:hover:text-slate-300');
            this.classList.add('text-slate-900', 'dark:text-white');
            
            // Show/hide tab content
            const tabContents = document.querySelectorAll('#clients .tab-content');
            tabContents.forEach(content => {
                content.classList.add('hidden');
            });
            
            const targetTabElement = document.getElementById(`${targetTab}-tab`);
            if (targetTabElement) {
                targetTabElement.classList.remove('hidden');
            }
        });
    });
    
    // Timeline toggle for tracking page
    const toggleTimeline = document.getElementById('toggleTimeline');
    if (toggleTimeline) {
        toggleTimeline.addEventListener('click', function() {
            const timelineContent = document.getElementById('timelineContent');
            if (timelineContent) {
                const isHidden = timelineContent.classList.contains('hidden');
                
                if (isHidden) {
                    timelineContent.classList.remove('hidden');
                    timelineContent.classList.add('animate-slide-up');
                    this.querySelector('.material-symbols-outlined').textContent = 'expand_less';
                } else {
                    timelineContent.classList.add('hidden');
                    this.querySelector('.material-symbols-outlined').textContent = 'expand_more';
                }
            }
        });
    }
    
    // Global search
    const globalSearch = document.getElementById('globalSearch');
    if (globalSearch) {
        globalSearch.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            globalSearch(searchTerm);
        });
    }
    
    // Dashboard filters
    const dashboardTypeFilter = document.getElementById('dashboardTypeFilter');
    if (dashboardTypeFilter) {
        dashboardTypeFilter.addEventListener('change', function() {
            filterDashboardTable();
        });
    }
    
    const dashboardStatusFilter = document.getElementById('dashboardStatusFilter');
    if (dashboardStatusFilter) {
        dashboardStatusFilter.addEventListener('change', function() {
            filterDashboardTable();
        });
    }
    
    // Create new button
    const createNewBtn = document.getElementById('createNewBtn');
    if (createNewBtn) {
        createNewBtn.addEventListener('click', function() {
            navigateToPage('new_file');
        });
    }
    
    // Export and refresh buttons
    const exportBtn = document.getElementById('exportBtn');
    if (exportBtn) {
        exportBtn.addEventListener('click', function() {
            showNotification('Fitur ekspor akan segera tersedia', 'info');
        });
    }
    
    const refreshBtn = document.getElementById('refreshBtn');
    if (refreshBtn) {
        refreshBtn.addEventListener('click', function() {
            updateFilesTable();
            showNotification('Data berhasil diperbarui', 'success');
        });
    }
    
    const moreFiltersBtn = document.getElementById('moreFiltersBtn');
    if (moreFiltersBtn) {
        moreFiltersBtn.addEventListener('click', function() {
            showNotification('Filter lanjutan akan segera tersedia', 'info');
        });
    }
}

    // Dashboard Functions
    function updateDashboard() {
        // Update metric cards
        const activeFiles = appData.files.filter(file => file.status !== 'Completed').length;
        const actionRequired = appData.files.filter(file => file.status === 'Waiting Client' || file.status === 'Overdue').length;
        const criticalOverdue = appData.files.filter(file => file.status === 'Overdue').length;
        
        document.getElementById('activeFilesCount').textContent = activeFiles;
        document.getElementById('actionRequiredCount').textContent = actionRequired;
        document.getElementById('criticalOverdueCount').textContent = criticalOverdue;
        
        // Update dashboard table
        updateDashboardTable();
    }

    function updateDashboardTable() {
        const tableBody = document.getElementById('dashboardTableBody');
        tableBody.innerHTML = '';
        
        // Get filter values
        const typeFilter = document.getElementById('dashboardTypeFilter').value;
        const statusFilter = document.getElementById('dashboardStatusFilter').value;
        
        // Filter files
        let filteredFiles = appData.files;
        if (typeFilter) {
            filteredFiles = filteredFiles.filter(file => file.serviceType === typeFilter);
        }
        if (statusFilter) {
            filteredFiles = filteredFiles.filter(file => file.status === statusFilter);
        }
        
        // Sort files (overdue first)
        filteredFiles.sort((a, b) => {
            if (a.status === 'Overdue' && b.status !== 'Overdue') return -1;
            if (a.status !== 'Overdue' && b.status === 'Overdue') return 1;
            return 0;
        });
        
        // Populate table (limit to 5 for dashboard)
        const displayFiles = filteredFiles.slice(0, 5);
        displayFiles.forEach(file => {
            const row = createFileTableRow(file);
            tableBody.appendChild(row);
        });
    }

    function filterDashboardTable() {
        updateDashboardTable();
    }

    // Files Page Functions
    function updateFilesTable() {
        const tableBody = document.getElementById('filesTableBody');
        tableBody.innerHTML = '';
        
        // Sort files (overdue first)
        const sortedFiles = [...appData.files].sort((a, b) => {
            if (a.status === 'Overdue' && b.status !== 'Overdue') return -1;
            if (a.status !== 'Overdue' && b.status === 'Overdue') return 1;
            return 0;
        });
        
        // Populate table
        sortedFiles.forEach(file => {
            const row = createFileTableRow(file);
            tableBody.appendChild(row);
        });
    }

    function createFileTableRow(file) {
        const row = document.createElement('tr');
        
        // Determine row class based on status
        if (file.status === 'Overdue') {
            row.className = 'table-row group bg-red-50/50 hover:bg-red-50 dark:bg-red-900/10 dark:hover:bg-red-900/20 transition-colors';
        } else {
            row.className = 'table-row group hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors';
        }
        
        // Create file number cell
        const fileNumberCell = document.createElement('td');
        fileNumberCell.className = 'whitespace-nowrap px-6 py-4 font-mono font-medium text-slate-600 dark:text-slate-300';
        
        if (file.status === 'Overdue') {
            fileNumberCell.className = 'whitespace-nowrap px-6 py-4 font-mono font-medium text-slate-900 dark:text-white';
            fileNumberCell.innerHTML = `
                <div class="flex items-center gap-2">
                    <span class="h-2 w-2 rounded-full bg-alert-red animate-pulse"></span>
                    ${file.id}
                </div>
            `;
        } else {
            fileNumberCell.textContent = file.id;
        }
        
        // Create client name cell
        const clientNameCell = document.createElement('td');
        clientNameCell.className = 'whitespace-nowrap px-6 py-4 text-slate-700 dark:text-slate-200';
        
        // Get client initials
        const initials = getClientInitials(file.clientName);
        const avatarColor = getAvatarColor(file.clientName);
        
        clientNameCell.innerHTML = `
            <div class="flex items-center gap-3">
                <div class="h-8 w-8 rounded-full ${avatarColor} flex items-center justify-center text-white text-xs font-bold">
                    ${initials}
                </div>
                ${file.status === 'Overdue' ? 
                    `<span class="font-semibold text-slate-900 dark:text-white">${file.clientName}</span>` : 
                    file.clientName
                }
            </div>
        `;
        
        // Create service type cell
        const serviceTypeCell = document.createElement('td');
        serviceTypeCell.className = 'whitespace-nowrap px-6 py-4';
        const serviceTypeColor = getServiceTypeColor(file.serviceType);
        serviceTypeCell.innerHTML = `
            <span class="inline-flex items-center rounded-md ${serviceTypeColor} px-2 py-1 text-xs font-medium">
                ${file.serviceType}
            </span>
        `;
        
        // Create progress cell
        const progressCell = document.createElement('td');
        progressCell.className = 'px-6 py-4';
        const progressColor = file.status === 'Overdue' ? 'bg-alert-red' : 'bg-primary';
        const stageStatusColor = file.status === 'Overdue' ? 'text-alert-red' : 'text-slate-500';
        const stageStatusText = file.status === 'Overdue' ? file.stageStatus : file.progress + '%';
        
        progressCell.innerHTML = `
            <div class="flex flex-col gap-1.5">
                <div class="flex justify-between text-xs text-slate-500 dark:text-slate-400">
                    <span>${file.currentStage}</span>
                    <span class="font-bold ${stageStatusColor}">${stageStatusText}</span>
                </div>
                <div class="h-1.5 w-full rounded-full bg-slate-200 dark:bg-slate-700">
                    <div class="h-1.5 rounded-full ${progressColor}" style="width: ${file.progress}%"></div>
                </div>
            </div>
        `;
        
        // Create estimated completion cell
        const completionCell = document.createElement('td');
        completionCell.className = 'whitespace-nowrap px-6 py-4';
        
        if (file.status === 'Overdue') {
            completionCell.className = 'whitespace-nowrap px-6 py-4 text-alert-red font-bold';
            completionCell.innerHTML = `
                ${file.estimatedCompletion}
                <span class="block text-[10px] font-normal opacity-80">${file.daysOverdue} days overdue</span>
            `;
        } else {
            completionCell.innerHTML = `<div class="text-sm text-slate-600 dark:text-slate-400">${file.estimatedCompletion}</div>`;
        }
        
        // Create status cell
        const statusCell = document.createElement('td');
        statusCell.className = 'whitespace-nowrap px-6 py-4';
        statusCell.innerHTML = createStatusBadge(file.status);
        
        // Create actions cell
        const actionsCell = document.createElement('td');
        actionsCell.className = 'whitespace-nowrap px-6 py-4 text-right';
        actionsCell.innerHTML = `
            <button class="action-button p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-800 view-file-btn" data-id="${file.id}">
                <span class="material-symbols-outlined text-[18px] text-slate-600 dark:text-slate-400">visibility</span>
            </button>
            <button class="action-button p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-800 edit-file-btn" data-id="${file.id}">
                <span class="material-symbols-outlined text-[18px] text-slate-600 dark:text-slate-400">edit</span>
            </button>
            <button class="action-button p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-800 more-file-btn" data-id="${file.id}">
                <span class="material-symbols-outlined text-[18px] text-slate-600 dark:text-slate-400">more_vert</span>
            </button>
        `;
        
        // Add cells to row
        row.appendChild(fileNumberCell);
        row.appendChild(clientNameCell);
        row.appendChild(serviceTypeCell);
        row.appendChild(progressCell);
        row.appendChild(completionCell);
        row.appendChild(statusCell);
        row.appendChild(actionsCell);
        
        // Add click event to row
        row.addEventListener('click', function(e) {
            // If not clicking on action buttons, show file details
            if (!e.target.closest('.action-button')) {
                showFileDetails(file.id);
            }
        });
        
        // Add click events to action buttons
        const viewBtn = actionsCell.querySelector('.view-file-btn');
        viewBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            showFileDetails(file.id);
        });
        
        const editBtn = actionsCell.querySelector('.edit-file-btn');
        editBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateToPage('new_file');
            // In a real app, this would populate the form with file data
        });
        
        const moreBtn = actionsCell.querySelector('.more-file-btn');
        moreBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            // In a real app, this would show a dropdown with more options
            console.log('More options for file:', file.id);
        });
        
        return row;
    }

    function updateFilesCardView() {
        const container = document.getElementById('filesCardContainer');
        container.innerHTML = '';
        
        // Sort files (overdue first)
        const sortedFiles = [...appData.files].sort((a, b) => {
            if (a.status === 'Overdue' && b.status !== 'Overdue') return -1;
            if (a.status !== 'Overdue' && b.status === 'Overdue') return 1;
            return 0;
        });
        
        // Create file cards
        sortedFiles.forEach(file => {
            const card = createFileCard(file);
            container.appendChild(card);
        });
    }

    function createFileCard(file) {
        const card = document.createElement('div');
        
        // Determine card class based on status
        if (file.status === 'Overdue') {
            card.className = 'file-card bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-red-100 dark:border-red-900/30 overflow-hidden';
        } else {
            card.className = 'file-card bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden';
        }
        
        // Get client initials and avatar color
        const initials = getClientInitials(file.clientName);
        const avatarColor = getAvatarColor(file.clientName);
        const serviceTypeColor = getServiceTypeColor(file.serviceType);
        
        // Create card content
        card.innerHTML = `
            <div class="p-5">
                <div class="flex items-center justify-between mb-4">
                    ${file.status === 'Overdue' ? 
                        `<div class="flex items-center gap-2">
                            <span class="h-2 w-2 rounded-full bg-alert-red animate-pulse"></span>
                            <span class="font-mono text-sm font-bold text-slate-900 dark:text-white">${file.id}</span>
                        </div>` :
                        `<span class="font-mono text-sm font-bold text-slate-600 dark:text-slate-300">${file.id}</span>`
                    }
                    <span class="inline-flex items-center rounded-md ${serviceTypeColor} px-2 py-1 text-xs font-medium">
                        ${file.serviceType}
                    </span>
                </div>
                <h3 class="font-semibold text-slate-900 dark:text-white mb-1">${file.clientName}</h3>
                <div class="flex items-center gap-2 mb-4">
                    <div class="h-1.5 w-full rounded-full bg-slate-200 dark:bg-slate-700">
                        <div class="h-1.5 rounded-full ${file.status === 'Overdue' ? 'bg-alert-red' : 'bg-primary'}" style="width: ${file.progress}%"></div>
                    </div>
                    <span class="text-xs font-bold ${file.status === 'Overdue' ? 'text-alert-red' : 'text-primary'}">${file.progress}%</span>
                </div>
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs text-slate-500 dark:text-slate-400">Est. Selesai</p>
                        <p class="text-sm font-bold ${file.status === 'Overdue' ? 'text-alert-red' : 'text-slate-900 dark:text-white'}">${file.estimatedCompletion}</p>
                        ${file.status === 'Overdue' ? 
                            `<p class="text-xs text-alert-red">${file.daysOverdue} days overdue</p>` : ''
                        }
                    </div>
                    <div class="flex gap-1">
                        <button class="p-1.5 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 view-file-btn" data-id="${file.id}">
                            <span class="material-symbols-outlined text-[16px]">visibility</span>
                        </button>
                        <button class="p-1.5 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 edit-file-btn" data-id="${file.id}">
                            <span class="material-symbols-outlined text-[16px]">edit</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="${file.status === 'Overdue' ? 'bg-red-50 dark:bg-red-900/10 border-t border-red-100 dark:border-red-900/30' : 'bg-slate-50 dark:bg-slate-800 border-t border-slate-100 dark:border-slate-700'} px-5 py-3">
                <div class="flex items-center gap-2">
                    ${file.status === 'Overdue' ? 
                        `<span class="material-symbols-outlined text-[16px] text-red-600 dark:text-red-400">warning</span>
                        <span class="text-xs font-bold text-red-600 dark:text-red-400">OVERDUE</span>` :
                        `<span class="material-symbols-outlined text-[16px] text-slate-600 dark:text-slate-400">schedule</span>
                        <span class="text-xs font-medium text-slate-600 dark:text-slate-400">${file.status}</span>`
                    }
                </div>
            </div>
        `;
        
        // Add click events to action buttons
        const viewBtn = card.querySelector('.view-file-btn');
        viewBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            showFileDetails(file.id);
        });
        
        const editBtn = card.querySelector('.edit-file-btn');
        editBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateToPage('new_file');
            // In a real app, this would populate the form with file data
        });
        
        // Add click event to card
        card.addEventListener('click', function() {
            showFileDetails(file.id);
        });
        
        return card;
    }

    function filterFiles(filterType) {
        // This would filter the files based on the selected filter
        console.log('Filtering files by:', filterType);
        // In a real implementation, this would update the displayed files
    }

    // Clients Page Functions
    function updateClientsTable() {
        const tableBody = document.getElementById('clientsTableBody');
        tableBody.innerHTML = '';
        
        // Populate table
        appData.clients.forEach(client => {
            const row = createClientTableRow(client);
            tableBody.appendChild(row);
        });
    }

    function createClientTableRow(client) {
        const row = document.createElement('tr');
        row.className = 'client-row group hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors';
        
        // Create client cell
        const clientCell = document.createElement('td');
        clientCell.className = 'whitespace-nowrap px-6 py-4';
        
        // Get client initials and avatar color
        const initials = getClientInitials(client.name);
        const avatarColor = getAvatarColor(client.name);
        
        clientCell.innerHTML = `
            <div class="flex items-center gap-3">
                <div class="h-10 w-10 rounded-full ${avatarColor} flex items-center justify-center text-white text-sm font-bold">
                    ${initials}
                </div>
                <div>
                    <p class="font-medium text-slate-900 dark:text-white">${client.name}</p>
                    <p class="text-xs text-slate-500 dark:text-slate-400">ID: ${client.id}</p>
                </div>
            </div>
        `;
        
        // Create contact cell
        const contactCell = document.createElement('td');
        contactCell.className = 'whitespace-nowrap px-6 py-4';
        contactCell.innerHTML = `
            <div class="text-sm">
                <p class="text-slate-900 dark:text-white">${client.contactNumber}</p>
                <p class="text-xs text-slate-500 dark:text-slate-400">${client.email}</p>
            </div>
        `;
        
        // Create type cell
        const typeCell = document.createElement('td');
        typeCell.className = 'whitespace-nowrap px-6 py-4';
        const typeColor = client.type === 'Individual' ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300' : 'bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300';
        typeCell.innerHTML = `
            <span class="inline-flex items-center rounded-md ${typeColor} px-2 py-1 text-xs font-medium">
                ${client.type === 'Individual' ? 'Individu' : 'Perusahaan'}
            </span>
        `;
        
        // Create total files cell
        const totalFilesCell = document.createElement('td');
        totalFilesCell.className = 'whitespace-nowrap px-6 py-4';
        totalFilesCell.innerHTML = `
            <div class="text-sm">
                <p class="font-medium text-slate-900 dark:text-white">${client.totalFiles}</p>
                <p class="text-xs text-slate-500 dark:text-slate-400">${client.activeFiles} Aktif</p>
            </div>
        `;
        
        // Create last activity cell
        const lastActivityCell = document.createElement('td');
        lastActivityCell.className = 'whitespace-nowrap px-6 py-4';
        lastActivityCell.innerHTML = `<div class="text-sm text-slate-900 dark:text-white">${client.lastActivity}</div>`;
        
        // Create status cell
        const statusCell = document.createElement('td');
        statusCell.className = 'whitespace-nowrap px-6 py-4';
        statusCell.innerHTML = createStatusBadge(client.status);
        
        // Create actions cell
        const actionsCell = document.createElement('td');
        actionsCell.className = 'whitespace-nowrap px-6 py-4 text-right';
        actionsCell.innerHTML = `
            <button class="action-button p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-800 view-client-btn" data-id="${client.id}">
                <span class="material-symbols-outlined text-[18px] text-slate-600 dark:text-slate-400">visibility</span>
            </button>
            <button class="action-button p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-800 edit-client-btn" data-id="${client.id}">
                <span class="material-symbols-outlined text-[18px] text-slate-600 dark:text-slate-400">edit</span>
            </button>
            <button class="action-button p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-800 more-client-btn" data-id="${client.id}">
                <span class="material-symbols-outlined text-[18px] text-slate-600 dark:text-slate-400">more_vert</span>
            </button>
        `;
        
        // Add cells to row
        row.appendChild(clientCell);
        row.appendChild(contactCell);
        row.appendChild(typeCell);
        row.appendChild(totalFilesCell);
        row.appendChild(lastActivityCell);
        row.appendChild(statusCell);
        row.appendChild(actionsCell);
        
        // Add click event to row
        row.addEventListener('click', function(e) {
            // If not clicking on action buttons, show client details
            if (!e.target.closest('.action-button')) {
                showClientDetails(client.id);
            }
        });
        
        // Add click events to action buttons
        const viewBtn = actionsCell.querySelector('.view-client-btn');
        viewBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            showClientDetails(client.id);
        });
        
        const editBtn = actionsCell.querySelector('.edit-client-btn');
        editBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            // In a real app, this would open an edit form
            console.log('Edit client:', client.id);
        });
        
        const moreBtn = actionsCell.querySelector('.more-client-btn');
        moreBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            // In a real app, this would show a dropdown with more options
            console.log('More options for client:', client.id);
        });
        
        return row;
    }

    // New File Page Functions
    function updateDocumentRequirements(serviceType) {
        const container = document.getElementById('documentRequirements');
        // Keep the header
        const header = container.querySelector('.grid');
        container.innerHTML = '';
        container.appendChild(header);
        
        // Get requirements from mapping
        const requirements = serviceRequirements[serviceType] || serviceRequirements['default'];
        
        // Create document requirement items
        requirements.forEach((req, index) => {
            const item = createDocumentRequirementItem(req, index);
            container.appendChild(item);
        });
    }

    function updateWorkflowPreview(serviceType) {
        const workflowContainer = document.querySelector('.relative.pl-2 ul');
        workflowContainer.innerHTML = '';
        
        // Get workflow steps from mapping
        const steps = workflowSteps[serviceType] || workflowSteps['default'];
        
        // Create workflow step items
        steps.forEach((step, index) => {
            const li = document.createElement('li');
            li.className = 'workflow-step flex gap-4 group';
            
            // Determine step styling based on status
            let stepIndicator = '';
            if (step.status === 'current') {
                stepIndicator = `
                    <div class="flex-shrink-0 size-6 rounded-full bg-primary border-2 border-white dark:border-slate-800 shadow flex items-center justify-center">
                        <span class="size-2 rounded-full bg-white animate-pulse"></span>
                    </div>
                `;
            } else {
                stepIndicator = `
                    <div class="flex-shrink-0 size-6 rounded-full bg-white dark:bg-slate-800 border-2 border-slate-300 dark:border-slate-600 flex items-center justify-center group-hover:border-primary transition-colors">
                        <span class="text-[10px] font-bold text-slate-500 dark:text-slate-400">${index + 1}</span>
                    </div>
                `;
            }
            
            // Determine content styling
            let contentClass = 'pt-0.5';
            if (step.status !== 'current') {
                contentClass += ' opacity-60 group-hover:opacity-100 transition-opacity';
            }
            
            li.innerHTML = `
                ${stepIndicator}
                <div class="${contentClass}">
                    <p class="text-sm font-bold ${step.status === 'current' ? 'text-primary' : 'text-slate-700 dark:text-slate-300'}">${step.name}</p>
                    <p class="text-xs text-slate-500 dark:text-slate-400">${step.description}</p>
                </div>
            `;
            
            workflowContainer.appendChild(li);
        });
    }

    function createDocumentRequirementItem(requirement, index) {
        const item = document.createElement('div');
        item.className = 'grid grid-cols-12 gap-4 items-start py-2 group';
        
        // Determine required badge color
        let requiredBadgeClass = 'bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400';
        if (requirement.required === 'Mandatory') {
            requiredBadgeClass = 'bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400';
        } else if (requirement.required === 'Secondary') {
            requiredBadgeClass = 'bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400';
        }
        
        // Determine note background color
        let noteBgClass = 'bg-slate-50 dark:bg-slate-800';
        let noteTextClass = 'text-slate-900 dark:text-white';
        let notePlaceholder = 'Tambahkan catatan...';
        
        if (requirement.noteType === 'warning') {
            noteBgClass = 'bg-amber-50 dark:bg-amber-900/20';
            noteTextClass = 'text-amber-900 dark:text-amber-200';
        }
        
        // Create item content
        item.innerHTML = `
            <div class="col-span-5 md:col-span-4 flex items-start gap-3 pl-2">
                <div class="flex h-6 items-center">
                    <input ${requirement.status === 'checked' ? 'checked' : ''} class="size-4 rounded border-slate-300 text-primary focus:ring-primary dark:border-slate-600 dark:bg-slate-700 dark:ring-offset-slate-800" id="doc-${index}" type="checkbox"/>
                </div>
                <div class="text-sm">
                    <label class="font-medium text-slate-900 dark:text-white cursor-pointer select-none" for="doc-${index}">${requirement.name}</label>
                    <p class="text-xs text-slate-500 dark:text-slate-400">${requirement.description}</p>
                </div>
            </div>
            <div class="col-span-2 flex justify-center pt-0.5">
                <span class="inline-flex items-center rounded-md ${requiredBadgeClass} px-2 py-1 text-xs font-medium ring-1 ring-inset ring-red-600/10">
                    ${requirement.required === 'Mandatory' ? 'Wajib' : requirement.required === 'Secondary' ? 'Sekunder' : 'Opsional'}
                </span>
            </div>
            <div class="col-span-5 md:col-span-6">
                <input class="form-input block w-full rounded-md border-0 ${noteBgClass} py-1.5 px-3 ${noteTextClass} shadow-sm ring-1 ring-inset ring-slate-300 dark:ring-slate-700 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 placeholder:text-slate-400 transition-all opacity-60 hover:opacity-100 focus:opacity-100 focus:bg-white dark:focus:bg-slate-900" 
                    type="text" 
                    placeholder="${notePlaceholder}"
                    value="${requirement.note || ''}"
                    ${requirement.noteType === 'warning' ? 'readonly' : ''} />
                ${requirement.noteType === 'warning' ? 
                    `<p class="text-[10px] text-amber-600 dark:text-amber-400 mt-1 pl-1"> Memerlukan "Bukti Penitipan" dari Bank</p>` : ''
                }
            </div>
        `;
        
        return item;
    }

    function addCustomDocument() {
        // In a real app, this would add a custom document requirement
        console.log('Adding custom document requirement');
    }

    function createNewFile() {
        // Get form values
        const serviceType = document.getElementById('serviceType').value;
        const clientName = document.getElementById('clientName').value;
        const contactNumber = document.getElementById('contactNumber').value;
        const objectAddress = document.getElementById('objectAddress').value;
        const targetCompletionDate = document.getElementById('targetCompletionDate').value;
        const assignedNotary = document.getElementById('assignedNotary').value;
        
        // Validate form
        if (!serviceType || !clientName || !contactNumber || !objectAddress || !targetCompletionDate) {
            showNotification('Harap lengkapi semua field yang diperlukan', 'error');
            return;
        }
        
        // Generate file ID
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');
        const randomNum = Math.floor(Math.random() * 1000);
        const fileId = `${year}/${month}/${String(randomNum).padStart(3, '0')}`;
        
        // Create new file object
        const newFile = {
            id: fileId,
            clientName: clientName,
            serviceType: serviceType,
            progress: 10,
            status: "In Progress",
            estimatedCompletion: formatDate(targetCompletionDate),
            daysOverdue: 0,
            currentStage: "Data Entry",
            stageStatus: "In Progress",
            assignedNotary: assignedNotary,
            contactNumber: contactNumber,
            email: "", // Would be filled from client data
            objectAddress: objectAddress,
            createdDate: formatDate(today),
            lastUpdated: formatDate(today),
            notes: "File baru dibuat"
        };
        
        // Add to data
        appData.files.push(newFile);
        
        // Save to localStorage
        saveData();
        
        // Show success message
        showNotification('File berhasil dibuat', 'success');
        
        // Navigate to all files page
        navigateToPage('all_files');
    }

    function saveDraftFile() {
        // Get form values
        const serviceType = document.getElementById('serviceType').value;
        const clientName = document.getElementById('clientName').value;
        const contactNumber = document.getElementById('contactNumber').value;
        const objectAddress = document.getElementById('objectAddress').value;
        const targetCompletionDate = document.getElementById('targetCompletionDate').value;
        const assignedNotary = document.getElementById('assignedNotary').value;
        
        // Validate form
        if (!serviceType || !clientName || !contactNumber || !objectAddress || !targetCompletionDate) {
            showNotification('Harap lengkapi semua field yang diperlukan', 'error');
            return;
        }
        
        // Show success message
        showNotification('Draf berhasil disimpan', 'success');
    }

    // Reports Page Functions
    function initializeCharts() {
        // Only initialize charts if the reports page is active
        if (!document.getElementById('reports').classList.contains('active')) {
            return;
        }
        
        // Status Chart
        const statusCtx = document.getElementById('statusChart');
        if (statusCtx) {
            // Destroy existing chart if it exists
            if (statusCtx.chart) {
                statusCtx.chart.destroy();
            }
            
            statusCtx.chart = new Chart(statusCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Selesai', 'Dalam Proses', 'Terlambat', 'Menunggu'],
                    datasets: [{
                        data: [98, 28, 8, 8],
                        backgroundColor: [
                            '#10b981',
                            '#1f96ad',
                            '#dc2626',
                            '#f59e0b'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // Service Type Chart
        const serviceCtx = document.getElementById('serviceChart');
        if (serviceCtx) {
            // Destroy existing chart if it exists
            if (serviceCtx.chart) {
                serviceCtx.chart.destroy();
            }
            
            serviceCtx.chart = new Chart(serviceCtx, {
                type: 'bar',
                data: {
                    labels: ['AJB', 'SKMHT', 'APHT', 'Hibah'],
                    datasets: [{
                        label: 'File',
                        data: [45, 38, 32, 27],
                        backgroundColor: '#1f96ad'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Trend Chart
        const trendCtx = document.getElementById('trendChart');
        if (trendCtx) {
            // Destroy existing chart if it exists
            if (trendCtx.chart) {
                trendCtx.chart.destroy();
            }
            
            trendCtx.chart = new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun'],
                    datasets: [{
                        label: 'Selesai',
                        data: [12, 19, 15, 25, 22, 30],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'File Baru',
                        data: [15, 22, 18, 28, 25, 32],
                        borderColor: '#1f96ad',
                        backgroundColor: 'rgba(31, 150, 173, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
    }

    // Client Functions
    function addNewClient() {
        // Get form values
        const clientType = document.getElementById('clientType').value;
        const clientName = document.getElementById('newClientName').value;
        const clientPhone = document.getElementById('newClientPhone').value;
        const clientEmail = document.getElementById('newClientEmail').value;
        const clientAddress = document.getElementById('newClientAddress').value;
        
        // Validate form
        if (!clientName || !clientPhone) {
            showNotification('Harap lengkapi nama dan nomor telepon', 'error');
            return;
        }
        
        // Generate client ID
        const clientId = 'CLI-' + String(appData.clients.length + 1).padStart(3, '0');
        
        // Create new client object
        const newClient = {
            id: clientId,
            name: clientName,
            type: clientType,
            contactNumber: clientPhone,
            email: clientEmail,
            address: clientAddress,
            totalFiles: 0,
            activeFiles: 0,
            lastActivity: 'Just now',
            status: 'Active'
        };
        
        // Add to data
        appData.clients.push(newClient);
        
        // Save to localStorage
        saveData();
        
        // Update clients table
        updateClientsTable();
        
        // Show success message
        showNotification('Klien berhasil ditambahkan', 'success');
    }

    // Modal Functions
    function showFileDetails(fileId) {
        const file = appData.files.find(f => f.id === fileId);
        if (!file) return;
        
        const modal = document.getElementById('fileDetailsModal');
        const content = document.getElementById('fileDetailsContent');
        
        // Get client initials and avatar color
        const initials = getClientInitials(file.clientName);
        const avatarColor = getAvatarColor(file.clientName);
        const serviceTypeColor = getServiceTypeColor(file.serviceType);
        
        // Populate content
        content.innerHTML = `
            <div class="space-y-6">
                <div class="flex items-center gap-4">
                    <div class="h-16 w-16 rounded-full ${avatarColor} flex items-center justify-center text-white text-xl font-bold">
                        ${initials}
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white">${file.id}</h2>
                        <p class="text-slate-600 dark:text-slate-400">${file.clientName}</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-semibold text-slate-900 dark:text-white mb-4">Informasi File</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Tipe Layanan</span>
                                <span class="inline-flex items-center rounded-md ${serviceTypeColor} px-2 py-1 text-xs font-medium">
                                    ${file.serviceType}
                                </span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Status</span>
                                ${createStatusBadge(file.status)}
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Progress</span>
                                <div class="flex items-center gap-2">
                                    <div class="w-24 bg-slate-200 dark:bg-slate-700 rounded-full h-2">
                                        <div class="bg-primary h-2 rounded-full" style="width: ${file.progress}%"></div>
                                    </div>
                                    <span class="text-sm font-medium">${file.progress}%</span>
                                </div>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Tahap Saat Ini</span>
                                <span class="text-sm font-medium">${file.currentStage}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Estimasi Selesai</span>
                                <span class="text-sm font-medium">${file.estimatedCompletion}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold text-slate-900 dark:text-white mb-4">Informasi Kontak</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Nomor Telepon</span>
                                <span class="text-sm font-medium">${file.contactNumber}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Email</span>
                                <span class="text-sm font-medium">${file.email || 'N/A'}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Alamat Objek</span>
                                <span class="text-sm font-medium text-right max-w-[200px]">${file.objectAddress}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Notaris Ditugaskan</span>
                                <span class="text-sm font-medium">${file.assignedNotary}</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold text-slate-900 dark:text-white mb-4">Catatan</h3>
                    <p class="text-sm text-slate-600 dark:text-slate-400">${file.notes}</p>
                </div>
                
                <div class="flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-800">
                    <button class="px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-medium hover:bg-slate-50 dark:hover:bg-slate-700">
                        Cetak
                    </button>
                    <button class="px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-primary-dark">
                        Edit
                    </button>
                </div>
            </div>
        `;
        
        // Show modal
        modal.classList.remove('hidden');
        modal.classList.add('flex');
    }

    function showClientDetails(clientId) {
        const client = appData.clients.find(c => c.id === clientId);
        if (!client) return;
        
        const modal = document.getElementById('clientDetailsModal');
        const content = document.getElementById('clientDetailsContent');
        
        // Get client initials and avatar color
        const initials = getClientInitials(client.name);
        const avatarColor = getAvatarColor(client.name);
        
        // Get client files
        const clientFiles = appData.files.filter(f => f.clientName === client.name);
        
        // Populate content
        content.innerHTML = `
            <div class="space-y-6">
                <div class="flex items-center gap-4">
                    <div class="h-16 w-16 rounded-full ${avatarColor} flex items-center justify-center text-white text-xl font-bold">
                        ${initials}
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white">${client.name}</h2>
                        <p class="text-slate-600 dark:text-slate-400">${client.type === 'Individual' ? 'Individu' : 'Perusahaan'}  ID: ${client.id}</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-semibold text-slate-900 dark:text-white mb-4">Informasi Kontak</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Nomor Telepon</span>
                                <span class="text-sm font-medium">${client.contactNumber}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Email</span>
                                <span class="text-sm font-medium">${client.email}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Alamat</span>
                                <span class="text-sm font-medium text-right max-w-[200px]">${client.address}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Status</span>
                                ${createStatusBadge(client.status)}
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold text-slate-900 dark:text-white mb-4">Statistik File</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Total File</span>
                                <span class="text-sm font-medium">${client.totalFiles}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">File Aktif</span>
                                <span class="text-sm font-medium">${client.activeFiles}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-slate-500 dark:text-slate-400">Aktivitas Terakhir</span>
                                <span class="text-sm font-medium">${client.lastActivity}</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold text-slate-900 dark:text-white mb-4">File Klien</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-slate-50 text-xs font-semibold uppercase text-slate-500 dark:bg-slate-800/50 dark:text-slate-400">
                                <tr>
                                    <th class="px-4 py-3">No. File</th>
                                    <th class="px-4 py-3">Tipe Layanan</th>
                                    <th class="px-4 py-3">Status</th>
                                    <th class="px-4 py-3">Est. Selesai</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                                ${clientFiles.map(file => `
                                    <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                                        <td class="px-4 py-3 font-mono">${file.id}</td>
                                        <td class="px-4 py-3">
                                            <span class="inline-flex items-center rounded-md ${getServiceTypeColor(file.serviceType)} px-2 py-1 text-xs font-medium">
                                                ${file.serviceType}
                                            </span>
                                        </td>
                                        <td class="px-4 py-3">
                                            ${createStatusBadge(file.status)}
                                        </td>
                                        <td class="px-4 py-3">${file.estimatedCompletion}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-800">
                    <button class="px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-medium hover:bg-slate-50 dark:hover:bg-slate-700">
                        Cetak
                    </button>
                    <button class="px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-primary-dark">
                        Edit
                    </button>
                </div>
            </div>
        `;
        
        // Show modal
        modal.classList.remove('hidden');
        modal.classList.add('flex');
    }

    // Notification Functions
    function toggleNotificationPanel() {
        const panel = document.getElementById('notificationPanel');
        panel.classList.toggle('hidden');
        
        // Mark all notifications as read
        if (!panel.classList.contains('hidden')) {
            appData.notifications.forEach(notification => {
                notification.read = true;
            });
            saveData();
            updateNotifications();
        }
    }

    function updateNotifications() {
        const notificationList = document.getElementById('notificationList');
        notificationList.innerHTML = '';
        
        // Count unread notifications
        const unreadCount = appData.notifications.filter(n => !n.read).length;
        const badge = document.getElementById('notificationBadge');
        
        if (unreadCount > 0) {
            badge.style.display = 'block';
        } else {
            badge.style.display = 'none';
        }
        
        // Populate notification list
        appData.notifications.forEach(notification => {
            const item = document.createElement('div');
            item.className = `p-3 rounded-lg border ${notification.read ? 'bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700' : 'bg-primary/5 border-primary/20'}`;
            
            // Get notification icon
            let icon = 'info';
            let iconColor = 'text-blue-600 dark:text-blue-400';
            
            if (notification.type === 'warning') {
                icon = 'warning';
                iconColor = 'text-amber-600 dark:text-amber-400';
            } else if (notification.type === 'success') {
                icon = 'check_circle';
                iconColor = 'text-green-600 dark:text-green-400';
            } else if (notification.type === 'error') {
                icon = 'error';
                iconColor = 'text-red-600 dark:text-red-400';
            }
            
            item.innerHTML = `
                <div class="flex gap-3">
                    <div class="flex-shrink-0">
                        <span class="material-symbols-outlined ${iconColor}">${icon}</span>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-slate-900 dark:text-white">${notification.title}</p>
                        <p class="text-xs text-slate-500 dark:text-slate-400 mt-1">${notification.message}</p>
                        <p class="text-xs text-slate-400 dark:text-slate-500 mt-2">${notification.timestamp}</p>
                    </div>
                </div>
            `;
            
            notificationList.appendChild(item);
        });
    }

    function showNotification(message, type = 'info') {
        // Create notification object
        const notification = {
            id: Date.now(),
            title: type === 'success' ? 'Sukses' : type === 'error' ? 'Error' : 'Informasi',
            message: message,
            type: type,
            read: false,
            timestamp: 'Just now'
        };
        
        // Add to notifications
        appData.notifications.unshift(notification);
        
        // Keep only the latest 10 notifications
        if (appData.notifications.length > 10) {
            appData.notifications = appData.notifications.slice(0, 10);
        }
        
        // Save and update
        saveData();
        updateNotifications();
        
        // Show notification panel
        const panel = document.getElementById('notificationPanel');
        panel.classList.remove('hidden');
        
        // Hide after 5 seconds
        setTimeout(() => {
            panel.classList.add('hidden');
        }, 5000);
    }

    // Settings Functions
    function toggleDarkMode() {
        document.documentElement.classList.toggle('dark');
        appData.settings.darkMode = document.documentElement.classList.contains('dark');
        saveData();
    }

    function applySettings() {
        // Apply dark mode
        if (appData.settings.darkMode) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
        
        // Update settings modal
        document.getElementById('darkModeToggleModal').checked = appData.settings.darkMode;
        document.getElementById('notificationToggle').checked = appData.settings.notifications;
    }

    function saveSettings() {
        // Get settings from form
        appData.settings.darkMode = document.getElementById('darkModeToggleModal').checked;
        appData.settings.notifications = document.getElementById('notificationToggle').checked;
        
        // Apply settings
        applySettings();
        
        // Save to localStorage
        saveData();
        
        // Show success message
        showNotification('Pengaturan berhasil disimpan', 'success');
    }

    // Search Functions
    function globalSearch(searchTerm) {
        // This would search across all data
        console.log('Searching for:', searchTerm);
        // In a real implementation, this would filter and display search results
    }

    // Utility Functions
    function createStatusBadge(status) {
        let badgeClass = 'inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-xs font-medium text-slate-700 dark:bg-slate-700 dark:text-slate-300';
        let badgeContent = status;
        
        if (status === 'Overdue') {
            badgeClass = 'inline-flex items-center gap-1 rounded-full bg-white border border-red-200 px-2.5 py-0.5 text-xs font-bold text-alert-red shadow-sm dark:bg-red-900/40 dark:border-red-800 dark:text-red-200';
            badgeContent = `<span class="material-symbols-outlined text-[14px]">warning</span> TERLAMBAT`;
        } else if (status === 'In Progress') {
            badgeClass = 'inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-xs font-medium text-slate-700 dark:bg-slate-700 dark:text-slate-300';
            badgeContent = 'Dalam Proses';
        } else if (status === 'Completed') {
            badgeClass = 'inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-700 dark:bg-green-900/30 dark:text-green-300';
            badgeContent = 'Selesai';
        } else if (status === 'Reviewing') {
            badgeClass = 'inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-xs font-medium text-slate-700 dark:bg-slate-700 dark:text-slate-300';
            badgeContent = 'Review';
        } else if (status === 'Waiting Client') {
            badgeClass = 'inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-xs font-medium text-slate-700 dark:bg-slate-700 dark:text-slate-300';
            badgeContent = 'Menunggu Klien';
        } else if (status === 'Active') {
            badgeClass = 'inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-700 dark:bg-green-900/30 dark:text-green-300';
            badgeContent = 'Aktif';
        } else if (status === 'Pending') {
            badgeClass = 'inline-flex items-center rounded-full bg-amber-100 px-2.5 py-0.5 text-xs font-medium text-amber-700 dark:bg-amber-900/30 dark:text-amber-300';
            badgeContent = 'Tertunda';
        } else if (status === 'Inactive') {
            badgeClass = 'inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-xs font-medium text-slate-700 dark:bg-slate-700 dark:text-slate-300';
            badgeContent = 'Tidak Aktif';
        }
        
        return `<span class="${badgeClass}">${badgeContent}</span>`;
    }

    function getClientInitials(clientName) {
        // For individual names, get first and last name initials
        // For company names, get first 2-3 letters
        if (clientName.startsWith('PT.') || clientName.startsWith('CV.')) {
            return clientName.substring(0, 2).toUpperCase();
        } else {
            const names = clientName.split(' ');
            if (names.length >= 2) {
                return (names[0][0] + names[names.length - 1][0]).toUpperCase();
            } else {
                return clientName.substring(0, 2).toUpperCase();
            }
        }
    }

    function getAvatarColor(clientName) {
        // Generate a consistent color based on client name
        const colors = [
            'bg-blue-600',
            'bg-purple-600',
            'bg-green-600',
            'bg-red-600',
            'bg-amber-600',
            'bg-teal-600',
            'bg-indigo-600',
            'bg-pink-600'
        ];
        
        let hash = 0;
        for (let i = 0; i < clientName.length; i++) {
            hash = clientName.charCodeAt(i) + ((hash << 5) - hash);
        }
        
        return colors[Math.abs(hash) % colors.length];
    }

    function getServiceTypeColor(serviceType) {
        const colors = {
            'AJB': 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300',
            'SKMHT': 'bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300',
            'APHT': 'bg-teal-100 dark:bg-teal-900/30 text-teal-700 dark:text-teal-300',
            'default': 'bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300'
        };
        
        return colors[serviceType] || colors['default'];
    }

    function formatDate(dateString) {
        const date = new Date(dateString);
        const options = { day: 'numeric', month: 'short', year: 'numeric' };
        return date.toLocaleDateString('id-ID', options);
    }

    function saveData() {
        localStorage.setItem('notaryDocData', JSON.stringify(appData));
    }
</script>
</body>
</html>